{"version":3,"sources":["../../src/MidiNumbers.js","../../src/Key.js","../../src/Keyboard.js","../../src/ControlledPiano.js","../../src/Piano.js","../../src/KeyboardShortcuts.js","../node_modules/just-range/index.js","../node_modules/lodash.difference/index.js","../node_modules/soundfont-player/lib/index.js","../node_modules/audio-loader/lib/index.js","../node_modules/audio-loader/lib/base64.js","../node_modules/audio-loader/lib/fetch.js","../node_modules/sample-player/lib/index.js","../node_modules/sample-player/lib/player.js","../node_modules/adsr/index.js","../node_modules/sample-player/lib/events.js","../node_modules/sample-player/lib/notes.js","../node_modules/sample-player/node_modules/note-parser/index.js","../node_modules/sample-player/lib/scheduler.js","../node_modules/sample-player/lib/midi.js","../node_modules/midimessage/dist/index.min.js","../node_modules/soundfont-player/lib/legacy.js","../node_modules/note-parser/index.js","../node_modules/react-dimensions/index.js","../node_modules/element-resize-event/index.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","../node_modules/react-dom-confetti/lib/confetti.js","../node_modules/dom-confetti/lib/main.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/typeof.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits.js"],"names":["SORTED_PITCHES","ACCIDENTAL_PITCHES","PITCH_INDEXES","C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B","NOTE_REGEX","midiNumberAttributesCache","MAX_MIDI_NUMBER","cache","midiNumber","pitchIndex","octave","Math","pitchName","note","isAccidental","buildMidiNumberAttributes","getAttributes","attrs","Error","NATURAL_MIDI_NUMBERS","fromNote","match","letter","accidental","MIDI_NUMBER_C0","parseInt","MIN_MIDI_NUMBER","Key","MidiNumbers","this","props","pitchPositions","getAbsoluteKeyPosition","noteRange","naturalKeyWidth","accidentalWidthRatio","gliss","useTouchEvents","active","disabled","children","className","classNames","style","left","ratioToPercentage","getRelativeKeyPosition","width","onMouseDown","onMouseUp","onMouseEnter","onMouseLeave","onTouchStart","onTouchCancel","onTouchEnd","React","Component","ratio","PropTypes","onPlayNoteInput","onStopNoteInput","node","Keyboard","range","last","getMidiNumbers","filter","keyWidth","height","getHeight","map","isActive","key","isNaturalMidiNumber","value","propName","componentName","first","activeNotes","renderNoteLabel","keyWidthToHeight","number","ControlledPiano","isMouseDown","prevActiveNotes","nextActiveNotes","notesStopped","difference","notesStarted","shortcut","sh","event","keyboardShortcut","window","prevProps","prevState","state","playNote","stopNote","keyboardShortcuts","isRequired","Piano","otherProps","handleStopNoteInput","create","firstNote","lastNote","keyboardConfig","currentMidiNumber","naturalKeyIndex","BOTTOM_ROW","natural","flat","sharp","HOME_ROW","QWERTY_ROW","module","exports","start","stop","step","toReturn","increasing","push","reIsHostCtor","freeGlobal","global","Object","freeSelf","self","root","Function","apply","func","thisArg","args","length","call","arrayIncludes","array","fromIndex","predicate","fromRight","index","baseFindIndex","baseIsNaN","baseIndexOf","arrayIncludesWith","comparator","arrayPush","values","offset","cacheHas","has","arrayProto","Array","prototype","funcProto","objectProto","coreJsData","maskSrcKey","uid","exec","keys","IE_PROTO","funcToString","toString","hasOwnProperty","objectToString","reIsNative","RegExp","replace","Symbol","propertyIsEnumerable","splice","spreadableSymbol","isConcatSpreadable","undefined","nativeMax","max","Map","getNative","nativeCreate","Hash","entries","clear","entry","set","ListCache","MapCache","SetCache","__data__","add","assocIndexOf","other","baseDifference","iteratee","includes","isCommon","result","valuesLength","arrayMap","outer","computed","valuesIndex","baseIsNative","isObject","isFunction","e","isHostObject","test","toSource","getMapData","data","type","isKeyable","object","getValue","isFlattenable","isArray","isArrayLikeObject","isArguments","get","pop","baseFlatten","depth","isStrict","arguments","otherArgs","isArrayLike","isLength","isObjectLike","tag","load","require","player","isSoundfontURL","name","nameToUrl","sf","format","Soundfont","instrument","ac","options","n","o","opts","isUrl","toUrl","url","soundfont","only","notes","then","buffers","p","connect","destination","base64","fetch","fromRegex","r","prefix","pre","source","defVal","loader","ArrayBuffer","loadArrayBuffer","isAudioFileName","loadAudioFile","isPromise","loadPromise","loadArrayData","loadObjectData","isJsonFileName","loadJsonFile","isBase64Audio","loadBase64Audio","isJsFileName","loadMidiJSFile","Promise","resolve","reject","done","decodeAudioData","buffer","slice","from","promise","all","obj","dest","promises","indexOf","audio","JSON","parse","i","decode","midiJsToJson","begin","end","lastIndexOf","loadAudio","sBase64","nBlocksSize","nMod3","nMod4","nChr","sB64Enc","nInLen","nOutLen","ceil","taBytes","Uint8Array","nUint24","nOutIdx","nInIdx","charCodeAt","req","XMLHttpRequest","responseType","open","onload","status","response","statusText","onerror","send","events","scheduler","midi","SamplePlayer","ADSR","EMPTY","DEFAULTS","gain","attack","decay","sustain","release","loop","cents","loopStart","loopEnd","isNum","x","PARAMS","connected","nextId","tracked","out","createGain","assign","context","AudioBuffer","when","currentTime","emit","createNode","id","onended","now","disconnect","env","track","duration","console","warn","play","ids","onevent","fn","adsr","forEach","envelope","createBufferSource","playbackRate","pow","time","stopAt","audioContext","voltage","_voltage","createBuffer","sampleRate","getChannelData","getVoltage","scale","startValue","endValue","_startAmount","_endAmount","_multiplier","defineProperties","writable","getReleaseDuration","at","target","startAmount","endAmount","_decayFrom","_startedAt","cancelScheduledValues","setValueAtTime","linearRampToValueAtTime","setTargetAtTime","getTimeConstant","isTarget","endTime","expFalloff","valueAtTime","fromTime","toTime","Float32Array","log","chain","fn1","fn2","a","b","c","d","on","cb","prop","old","toMidi","isMidi","toKey","mapper","reduce","mapped","mapBuffers","dec","floor","REGEX","SEMITONES","str","isTonic","tuning","m","toUpperCase","acc","pc","alt","chroma","oct","freq","midiToFreq","tonicOf","parser","regex","src","isArr","OPTS","schedule","t","isObj","midimessage","listenToMidi","input","started","vel","onmidimessage","msg","mm","messageType","velocity","channel","s","h","code","1","defineProperty","_event","_data","receivedTime","_messageCode","pressure","controllerNumber","controllerValue","channelModeMessage","program","pitchBend","ctx","instruments","oscillatorPlayer","defaultOptions","vcoType","vco","createOscillator","frequency","vca","onready","callback","inst","loadBuffers","noteToMidi","fillStr","num","join","pos","build","charAt","octStr","isDef","_extends","_createClass","descriptor","enumerable","configurable","Constructor","protoProps","staticProps","_classCallCheck","instance","TypeError","_possibleConstructorReturn","ReferenceError","_inherits","subClass","superClass","constructor","setPrototypeOf","__proto__","onElementResize","defaultContainerStyle","padding","border","defaultGetWidth","element","clientWidth","defaultGetHeight","clientHeight","_ref","_ref$getHeight","_ref$getWidth","getWidth","_ref$containerStyle","containerStyle","_ref$className","_ref$elementResize","elementResize","ComposedComponent","_React$Component","DimensionsHOC","_ref2","_temp","_this","_len","_key","getPrototypeOf","concat","updateDimensions","container","refs","containerWidth","containerHeight","setState","onResize","rqf","getWindow","requestAnimationFrame","ownerDocument","defaultView","addEventListener","removeEventListener","wrappedInstance","_state","createElement","ref","requestFrame","raf","mozRequestAnimationFrame","webkitRequestAnimationFrame","setTimeout","cancelFrame","cancel","cancelAnimationFrame","mozCancelAnimationFrame","webkitCancelAnimationFrame","clearTimeout","resizeListener","win","srcElement","__resizeRAF__","trigger","__resizeTrigger__","__resizeListeners__","isIE","document","attachEvent","navigator","userAgent","getComputedStyle","position","setAttribute","__resizeElement__","contentDocument","appendChild","bind","unbind","detachEvent","removeChild","_toConsumableArray","arr","arrayLikeToArray","iter","iterator","unsupportedIterableToArray","_react","_react2","__esModule","default","_domConfetti","Confetti","_Component","setRef","confetti","config","_Object$assign","defaults","backwardPatch","elementCount","colors","perspective","angle","spread","startVelocity","dragFriction","stagger","random","elements","createElements","fettis","physics","randomPhysics","animate","_","color","willChange","visibility","radAngle","PI","radSpread","y","z","wobble","wobbleSpeed","angle2D","angle3D","tiltAngle","tiltAngleSpeed","startTime","update","elapsed","progress","fetti","cos","sin","_fetti$physics","transform","opacity","updateFetti","parentNode","delay","_defineProperties","_getPrototypeOf","_isNativeReflectConstruct","Reflect","construct","sham","Proxy","Date","_typeof","_createSuper","Derived","Super","NewTarget","_setPrototypeOf"],"mappings":"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","file":"static/js/5.f83dde84.chunk.js","sourcesContent":["import range from 'just-range';\n\nconst SORTED_PITCHES = ['C', 'Db', 'D', 'Eb', 'E', 'F', 'Gb', 'G', 'Ab', 'A', 'Bb', 'B'];\nconst ACCIDENTAL_PITCHES = ['Db', 'Eb', 'Gb', 'Ab', 'Bb'];\nconst PITCH_INDEXES = {\n  C: 0,\n  'C#': 1,\n  Db: 1,\n  D: 2,\n  'D#': 3,\n  Eb: 3,\n  E: 4,\n  F: 5,\n  'F#': 6,\n  Gb: 6,\n  G: 7,\n  'G#': 8,\n  Ab: 8,\n  A: 9,\n  'A#': 10,\n  Bb: 10,\n  B: 11,\n};\nconst MIDI_NUMBER_C0 = 12;\nconst MIN_MIDI_NUMBER = MIDI_NUMBER_C0;\nconst MAX_MIDI_NUMBER = 127;\nconst NOTE_REGEX = /([a-g])([#b]?)(\\d+)/;\nconst NOTES_IN_OCTAVE = 12;\n\n// Converts string notes in scientific pitch notation to a MIDI number, or null.\n//\n// Example: \"c#0\" => 13, \"eb5\" => 75, \"abc\" => null\n//\n// References:\n// - http://www.flutopedia.com/octave_notation.htm\n// - https://github.com/danigb/tonal/blob/master/packages/note/index.js\nfunction fromNote(note) {\n  if (!note) {\n    throw Error('Invalid note argument');\n  }\n  const match = NOTE_REGEX.exec(note.toLowerCase());\n  if (!match) {\n    throw Error('Invalid note argument');\n  }\n  const [, letter, accidental, octave] = match;\n  const pitchName = `${letter.toUpperCase()}${accidental}`;\n  const pitchIndex = PITCH_INDEXES[pitchName];\n  if (pitchIndex == null) {\n    throw Error('Invalid note argument');\n  }\n  return MIDI_NUMBER_C0 + pitchIndex + NOTES_IN_OCTAVE * parseInt(octave, 10);\n}\n\n//\n// Build cache for getAttributes\n//\nfunction buildMidiNumberAttributes(midiNumber) {\n  const pitchIndex = (midiNumber - MIDI_NUMBER_C0) % NOTES_IN_OCTAVE;\n  const octave = Math.floor((midiNumber - MIDI_NUMBER_C0) / NOTES_IN_OCTAVE);\n  const pitchName = SORTED_PITCHES[pitchIndex];\n  return {\n    note: `${pitchName}${octave}`,\n    pitchName,\n    octave,\n    midiNumber,\n    isAccidental: ACCIDENTAL_PITCHES.includes(pitchName),\n  };\n}\n\nfunction buildMidiNumberAttributesCache() {\n  return range(MIN_MIDI_NUMBER, MAX_MIDI_NUMBER + 1).reduce((cache, midiNumber) => {\n    cache[midiNumber] = buildMidiNumberAttributes(midiNumber);\n    return cache;\n  }, {});\n}\n\nconst midiNumberAttributesCache = buildMidiNumberAttributesCache();\n\n// Returns an object containing various attributes for a given MIDI number.\n// Throws error for invalid midiNumbers.\nfunction getAttributes(midiNumber) {\n  const attrs = midiNumberAttributesCache[midiNumber];\n  if (!attrs) {\n    throw Error('Invalid MIDI number');\n  }\n  return attrs;\n}\n\n// Returns all MIDI numbers corresponding to natural notes, e.g. C and not C# or Bb.\nconst NATURAL_MIDI_NUMBERS = range(MIN_MIDI_NUMBER, MAX_MIDI_NUMBER + 1).filter(\n  (midiNumber) => !getAttributes(midiNumber).isAccidental,\n);\n\nexport default {\n  fromNote,\n  getAttributes,\n  MIN_MIDI_NUMBER,\n  MAX_MIDI_NUMBER,\n  NATURAL_MIDI_NUMBERS,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\n\nimport MidiNumbers from './MidiNumbers';\n\nclass Key extends React.Component {\n  static propTypes = {\n    midiNumber: PropTypes.number.isRequired,\n    naturalKeyWidth: PropTypes.number.isRequired, // Width as a ratio between 0 and 1\n    gliss: PropTypes.bool.isRequired,\n    useTouchEvents: PropTypes.bool.isRequired,\n    accidental: PropTypes.bool.isRequired,\n    active: PropTypes.bool.isRequired,\n    disabled: PropTypes.bool.isRequired,\n    onPlayNoteInput: PropTypes.func.isRequired,\n    onStopNoteInput: PropTypes.func.isRequired,\n    accidentalWidthRatio: PropTypes.number.isRequired,\n    pitchPositions: PropTypes.object.isRequired,\n    children: PropTypes.node,\n  };\n\n  static defaultProps = {\n    accidentalWidthRatio: 0.65,\n    pitchPositions: {\n      C: 0,\n      Db: 0.55,\n      D: 1,\n      Eb: 1.8,\n      E: 2,\n      F: 3,\n      Gb: 3.5,\n      G: 4,\n      Ab: 4.7,\n      A: 5,\n      Bb: 5.85,\n      B: 6,\n    },\n  };\n\n  onPlayNoteInput = () => {\n    this.props.onPlayNoteInput(this.props.midiNumber);\n  };\n\n  onStopNoteInput = () => {\n    this.props.onStopNoteInput(this.props.midiNumber);\n  };\n\n  // Key position is represented by the number of natural key widths from the left\n  getAbsoluteKeyPosition(midiNumber) {\n    const OCTAVE_WIDTH = 7;\n    const { octave, pitchName } = MidiNumbers.getAttributes(midiNumber);\n    const pitchPosition = this.props.pitchPositions[pitchName];\n    const octavePosition = OCTAVE_WIDTH * octave;\n    return pitchPosition + octavePosition;\n  }\n\n  getRelativeKeyPosition(midiNumber) {\n    return (\n      this.getAbsoluteKeyPosition(midiNumber) -\n      this.getAbsoluteKeyPosition(this.props.noteRange.first)\n    );\n  }\n\n  render() {\n    const {\n      naturalKeyWidth,\n      accidentalWidthRatio,\n      midiNumber,\n      gliss,\n      useTouchEvents,\n      accidental,\n      active,\n      disabled,\n      children,\n    } = this.props;\n\n    // Need to conditionally include/exclude handlers based on useTouchEvents,\n    // because otherwise mobile taps double fire events.\n    return (\n      <div\n        className={classNames('ReactPiano__Key', {\n          'ReactPiano__Key--accidental': accidental,\n          'ReactPiano__Key--natural': !accidental,\n          'ReactPiano__Key--disabled': disabled,\n          'ReactPiano__Key--active': active,\n        })}\n        style={{\n          left: ratioToPercentage(this.getRelativeKeyPosition(midiNumber) * naturalKeyWidth),\n          width: ratioToPercentage(\n            accidental ? accidentalWidthRatio * naturalKeyWidth : naturalKeyWidth,\n          ),\n        }}\n        onMouseDown={useTouchEvents ? null : this.onPlayNoteInput}\n        onMouseUp={useTouchEvents ? null : this.onStopNoteInput}\n        onMouseEnter={gliss ? this.onPlayNoteInput : null}\n        onMouseLeave={this.onStopNoteInput}\n        onTouchStart={useTouchEvents ? this.onPlayNoteInput : null}\n        onTouchCancel={useTouchEvents ? this.onStopNoteInput : null}\n        onTouchEnd={useTouchEvents ? this.onStopNoteInput : null}\n      >\n        <div className=\"ReactPiano__NoteLabelContainer\">{children}</div>\n      </div>\n    );\n  }\n}\n\nfunction ratioToPercentage(ratio) {\n  return `${ratio * 100}%`;\n}\n\nexport default Key;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport range from 'just-range';\nimport classNames from 'classnames';\n\nimport Key from './Key';\nimport MidiNumbers from './MidiNumbers';\n\nclass Keyboard extends React.Component {\n  static propTypes = {\n    noteRange: noteRangePropType,\n    activeNotes: PropTypes.arrayOf(PropTypes.number),\n    onPlayNoteInput: PropTypes.func.isRequired,\n    onStopNoteInput: PropTypes.func.isRequired,\n    renderNoteLabel: PropTypes.func.isRequired,\n    keyWidthToHeight: PropTypes.number.isRequired,\n    className: PropTypes.string,\n    disabled: PropTypes.bool,\n    gliss: PropTypes.bool,\n    useTouchEvents: PropTypes.bool,\n    // If width is not provided, must have fixed width and height in parent container\n    width: PropTypes.number,\n  };\n\n  static defaultProps = {\n    disabled: false,\n    gliss: false,\n    useTouchEvents: false,\n    keyWidthToHeight: 0.33,\n    renderNoteLabel: () => {},\n  };\n\n  // Range of midi numbers on keyboard\n  getMidiNumbers() {\n    return range(this.props.noteRange.first, this.props.noteRange.last + 1);\n  }\n\n  getNaturalKeyCount() {\n    return this.getMidiNumbers().filter((number) => {\n      const { isAccidental } = MidiNumbers.getAttributes(number);\n      return !isAccidental;\n    }).length;\n  }\n\n  // Returns a ratio between 0 and 1\n  getNaturalKeyWidth() {\n    return 1 / this.getNaturalKeyCount();\n  }\n\n  getWidth() {\n    return this.props.width ? this.props.width : '100%';\n  }\n\n  getHeight() {\n    if (!this.props.width) {\n      return '100%';\n    }\n    const keyWidth = this.props.width * this.getNaturalKeyWidth();\n    return `${keyWidth / this.props.keyWidthToHeight}px`;\n  }\n\n  render() {\n    const naturalKeyWidth = this.getNaturalKeyWidth();\n    return (\n      <div\n        className={classNames('ReactPiano__Keyboard', this.props.className)}\n        style={{ width: this.getWidth(), height: this.getHeight() }}\n      >\n        {this.getMidiNumbers().map((midiNumber) => {\n          const { note, isAccidental } = MidiNumbers.getAttributes(midiNumber);\n          const isActive = !this.props.disabled && this.props.activeNotes.includes(midiNumber);\n          return (\n            <Key\n              naturalKeyWidth={naturalKeyWidth}\n              midiNumber={midiNumber}\n              noteRange={this.props.noteRange}\n              active={isActive}\n              accidental={isAccidental}\n              disabled={this.props.disabled}\n              onPlayNoteInput={this.props.onPlayNoteInput}\n              onStopNoteInput={this.props.onStopNoteInput}\n              gliss={this.props.gliss}\n              useTouchEvents={this.props.useTouchEvents}\n              key={midiNumber}\n            >\n              {this.props.disabled\n                ? null\n                : this.props.renderNoteLabel({\n                    isActive,\n                    isAccidental,\n                    midiNumber,\n                  })}\n            </Key>\n          );\n        })}\n      </div>\n    );\n  }\n}\n\nfunction isNaturalMidiNumber(value) {\n  if (typeof value !== 'number') {\n    return false;\n  }\n  return MidiNumbers.NATURAL_MIDI_NUMBERS.includes(value);\n}\n\nfunction noteRangePropType(props, propName, componentName) {\n  const { first, last } = props[propName];\n  if (!first || !last) {\n    return new Error(\n      `Invalid prop ${propName} supplied to ${componentName}. ${propName} must be an object with .first and .last values.`,\n    );\n  }\n  if (!isNaturalMidiNumber(first) || !isNaturalMidiNumber(last)) {\n    return new Error(\n      `Invalid prop ${propName} supplied to ${componentName}. ${propName} values must be valid MIDI numbers, and should not be accidentals (sharp or flat notes).`,\n    );\n  }\n  if (first >= last) {\n    return new Error(\n      `Invalid prop ${propName} supplied to ${componentName}. ${propName}.first must be smaller than ${propName}.last.`,\n    );\n  }\n}\n\nexport default Keyboard;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport difference from 'lodash.difference';\nimport Keyboard from './Keyboard';\n\nclass ControlledPiano extends React.Component {\n  static propTypes = {\n    noteRange: PropTypes.object.isRequired,\n    activeNotes: PropTypes.arrayOf(PropTypes.number.isRequired).isRequired,\n    playNote: PropTypes.func.isRequired,\n    stopNote: PropTypes.func.isRequired,\n    onPlayNoteInput: PropTypes.func.isRequired,\n    onStopNoteInput: PropTypes.func.isRequired,\n    renderNoteLabel: PropTypes.func.isRequired,\n    className: PropTypes.string,\n    disabled: PropTypes.bool,\n    width: PropTypes.number,\n    keyWidthToHeight: PropTypes.number,\n    keyboardShortcuts: PropTypes.arrayOf(\n      PropTypes.shape({\n        key: PropTypes.string.isRequired,\n        midiNumber: PropTypes.number.isRequired,\n      }),\n    ),\n  };\n\n  static defaultProps = {\n    renderNoteLabel: ({ keyboardShortcut, midiNumber, isActive, isAccidental }) =>\n      keyboardShortcut ? (\n        <div\n          className={classNames('ReactPiano__NoteLabel', {\n            'ReactPiano__NoteLabel--active': isActive,\n            'ReactPiano__NoteLabel--accidental': isAccidental,\n            'ReactPiano__NoteLabel--natural': !isAccidental,\n          })}\n        >\n          {keyboardShortcut}\n        </div>\n      ) : null,\n  };\n\n  state = {\n    isMouseDown: false,\n    useTouchEvents: false,\n  };\n\n  componentDidMount() {\n    window.addEventListener('keydown', this.onKeyDown);\n    window.addEventListener('keyup', this.onKeyUp);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.onKeyDown);\n    window.removeEventListener('keyup', this.onKeyUp);\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (this.props.activeNotes !== prevProps.activeNotes) {\n      this.handleNoteChanges({\n        prevActiveNotes: prevProps.activeNotes || [],\n        nextActiveNotes: this.props.activeNotes || [],\n      });\n    }\n  }\n\n  // This function is responsible for diff'ing activeNotes\n  // and playing or stopping notes accordingly.\n  handleNoteChanges = ({ prevActiveNotes, nextActiveNotes }) => {\n    if (this.props.disabled) {\n      return;\n    }\n    const notesStopped = difference(prevActiveNotes, nextActiveNotes);\n    const notesStarted = difference(nextActiveNotes, prevActiveNotes);\n    notesStarted.forEach((midiNumber) => {\n      this.props.playNote(midiNumber);\n    });\n    notesStopped.forEach((midiNumber) => {\n      this.props.stopNote(midiNumber);\n    });\n  };\n\n  getMidiNumberForKey = (key) => {\n    if (!this.props.keyboardShortcuts) {\n      return null;\n    }\n    const shortcut = this.props.keyboardShortcuts.find((sh) => sh.key === key);\n    return shortcut && shortcut.midiNumber;\n  };\n\n  getKeyForMidiNumber = (midiNumber) => {\n    if (!this.props.keyboardShortcuts) {\n      return null;\n    }\n    const shortcut = this.props.keyboardShortcuts.find((sh) => sh.midiNumber === midiNumber);\n    return shortcut && shortcut.key;\n  };\n\n  onKeyDown = (event) => {\n    // Don't conflict with existing combinations like ctrl + t\n    if (event.ctrlKey || event.metaKey || event.shiftKey) {\n      return;\n    }\n    const midiNumber = this.getMidiNumberForKey(event.key);\n    if (midiNumber) {\n      this.onPlayNoteInput(midiNumber);\n    }\n  };\n\n  onKeyUp = (event) => {\n    // This *should* also check for event.ctrlKey || event.metaKey || event.ShiftKey like onKeyDown does,\n    // but at least on Mac Chrome, when mashing down many alphanumeric keystrokes at once,\n    // ctrlKey is fired unexpectedly, which would cause onStopNote to NOT be fired, which causes problematic\n    // lingering notes. Since it's fairly safe to call onStopNote even when not necessary,\n    // the ctrl/meta/shift check is removed to fix that issue.\n    const midiNumber = this.getMidiNumberForKey(event.key);\n    if (midiNumber) {\n      this.onStopNoteInput(midiNumber);\n    }\n  };\n\n  onPlayNoteInput = (midiNumber) => {\n    if (this.props.disabled) {\n      return;\n    }\n    // Pass in previous activeNotes for recording functionality\n    this.props.onPlayNoteInput(midiNumber, this.props.activeNotes);\n  };\n\n  onStopNoteInput = (midiNumber) => {\n    if (this.props.disabled) {\n      return;\n    }\n    // Pass in previous activeNotes for recording functionality\n    this.props.onStopNoteInput(midiNumber, this.props.activeNotes);\n  };\n\n  onMouseDown = () => {\n    this.setState({\n      isMouseDown: true,\n    });\n  };\n\n  onMouseUp = () => {\n    this.setState({\n      isMouseDown: false,\n    });\n  };\n\n  onTouchStart = () => {\n    this.setState({\n      useTouchEvents: true,\n    });\n  };\n\n  renderNoteLabel = ({ midiNumber, isActive, isAccidental }) => {\n    const keyboardShortcut = this.getKeyForMidiNumber(midiNumber);\n    return this.props.renderNoteLabel({ keyboardShortcut, midiNumber, isActive, isAccidental });\n  };\n\n  render() {\n    return (\n      <div\n        style={{ width: '100%', height: '100%' }}\n        onMouseDown={this.onMouseDown}\n        onMouseUp={this.onMouseUp}\n        onTouchStart={this.onTouchStart}\n        data-testid=\"container\"\n      >\n        <Keyboard\n          noteRange={this.props.noteRange}\n          onPlayNoteInput={this.onPlayNoteInput}\n          onStopNoteInput={this.onStopNoteInput}\n          activeNotes={this.props.activeNotes}\n          className={this.props.className}\n          disabled={this.props.disabled}\n          width={this.props.width}\n          keyWidthToHeight={this.props.keyWidthToHeight}\n          gliss={this.state.isMouseDown}\n          useTouchEvents={this.state.useTouchEvents}\n          renderNoteLabel={this.renderNoteLabel}\n        />\n      </div>\n    );\n  }\n}\n\nexport default ControlledPiano;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport difference from 'lodash.difference';\nimport ControlledPiano from './ControlledPiano';\nimport Keyboard from './Keyboard';\n\nclass Piano extends React.Component {\n  static propTypes = {\n    noteRange: PropTypes.object.isRequired,\n    activeNotes: PropTypes.arrayOf(PropTypes.number.isRequired),\n    playNote: PropTypes.func.isRequired,\n    stopNote: PropTypes.func.isRequired,\n    onPlayNoteInput: PropTypes.func,\n    onStopNoteInput: PropTypes.func,\n    renderNoteLabel: PropTypes.func,\n    className: PropTypes.string,\n    disabled: PropTypes.bool,\n    width: PropTypes.number,\n    keyWidthToHeight: PropTypes.number,\n    keyboardShortcuts: PropTypes.arrayOf(\n      PropTypes.shape({\n        key: PropTypes.string.isRequired,\n        midiNumber: PropTypes.number.isRequired,\n      }),\n    ),\n  };\n\n  state = {\n    activeNotes: this.props.activeNotes || [],\n  };\n\n  componentDidUpdate(prevProps) {\n    // Make activeNotes \"controllable\" by using internal\n    // state by default, but allowing prop overrides.\n    if (\n      prevProps.activeNotes !== this.props.activeNotes &&\n      this.state.activeNotes !== this.props.activeNotes\n    ) {\n      this.setState({\n        activeNotes: this.props.activeNotes || [],\n      });\n    }\n  }\n\n  handlePlayNoteInput = (midiNumber) => {\n    this.setState((prevState) => {\n      // Need to be handled inside setState in order to set prevActiveNotes without\n      // race conditions.\n      if (this.props.onPlayNoteInput) {\n        this.props.onPlayNoteInput(midiNumber, { prevActiveNotes: prevState.activeNotes });\n      }\n\n      // Don't append note to activeNotes if it's already present\n      if (prevState.activeNotes.includes(midiNumber)) {\n        return null;\n      }\n      return {\n        activeNotes: prevState.activeNotes.concat(midiNumber),\n      };\n    });\n  };\n\n  handleStopNoteInput = (midiNumber) => {\n    this.setState((prevState) => {\n      // Need to be handled inside setState in order to set prevActiveNotes without\n      // race conditions.\n      if (this.props.onStopNoteInput) {\n        this.props.onStopNoteInput(midiNumber, { prevActiveNotes: this.state.activeNotes });\n      }\n      return {\n        activeNotes: prevState.activeNotes.filter((note) => midiNumber !== note),\n      };\n    });\n  };\n\n  render() {\n    const { activeNotes, onPlayNoteInput, onStopNoteInput, ...otherProps } = this.props;\n    return (\n      <ControlledPiano\n        activeNotes={this.state.activeNotes}\n        onPlayNoteInput={this.handlePlayNoteInput}\n        onStopNoteInput={this.handleStopNoteInput}\n        {...otherProps}\n      />\n    );\n  }\n}\n\nexport default Piano;\n","import MidiNumbers from './MidiNumbers';\n\nfunction createKeyboardShortcuts({ firstNote, lastNote, keyboardConfig }) {\n  let currentMidiNumber = firstNote;\n  let naturalKeyIndex = 0;\n  let keyboardShortcuts = [];\n\n  while (\n    // There are still keys to be assigned\n    naturalKeyIndex < keyboardConfig.length &&\n    // Note to be assigned does not surpass range\n    currentMidiNumber <= lastNote\n  ) {\n    const key = keyboardConfig[naturalKeyIndex];\n    const { isAccidental } = MidiNumbers.getAttributes(currentMidiNumber);\n    if (isAccidental) {\n      keyboardShortcuts.push({\n        key: key.flat,\n        midiNumber: currentMidiNumber,\n      });\n    } else {\n      keyboardShortcuts.push({\n        key: key.natural,\n        midiNumber: currentMidiNumber,\n      });\n      naturalKeyIndex += 1;\n    }\n    currentMidiNumber += 1;\n  }\n  return keyboardShortcuts;\n}\n\nexport default {\n  create: createKeyboardShortcuts,\n  // Preset configurations\n  BOTTOM_ROW: [\n    { natural: 'z', flat: 'a', sharp: 's' },\n    { natural: 'x', flat: 's', sharp: 'd' },\n    { natural: 'c', flat: 'd', sharp: 'f' },\n    { natural: 'v', flat: 'f', sharp: 'g' },\n    { natural: 'b', flat: 'g', sharp: 'h' },\n    { natural: 'n', flat: 'h', sharp: 'j' },\n    { natural: 'm', flat: 'j', sharp: 'k' },\n    { natural: ',', flat: 'k', sharp: 'l' },\n    { natural: '.', flat: 'l', sharp: ';' },\n    { natural: '/', flat: ';', sharp: \"'\" },\n  ],\n  HOME_ROW: [\n    { natural: 'a', flat: 'q', sharp: 'w' },\n    { natural: 's', flat: 'w', sharp: 'e' },\n    { natural: 'd', flat: 'e', sharp: 'r' },\n    { natural: 'f', flat: 'r', sharp: 't' },\n    { natural: 'g', flat: 't', sharp: 'y' },\n    { natural: 'h', flat: 'y', sharp: 'u' },\n    { natural: 'j', flat: 'u', sharp: 'i' },\n    { natural: 'k', flat: 'i', sharp: 'o' },\n    { natural: 'l', flat: 'o', sharp: 'p' },\n    { natural: ';', flat: 'p', sharp: '[' },\n    { natural: \"'\", flat: '[', sharp: ']' },\n  ],\n  QWERTY_ROW: [\n    { natural: 'q', flat: '1', sharp: '2' },\n    { natural: 'w', flat: '2', sharp: '3' },\n    { natural: 'e', flat: '3', sharp: '4' },\n    { natural: 'r', flat: '4', sharp: '5' },\n    { natural: 't', flat: '5', sharp: '6' },\n    { natural: 'y', flat: '6', sharp: '7' },\n    { natural: 'u', flat: '7', sharp: '8' },\n    { natural: 'i', flat: '8', sharp: '9' },\n    { natural: 'o', flat: '9', sharp: '0' },\n    { natural: 'p', flat: '0', sharp: '-' },\n    { natural: '[', flat: '-', sharp: '=' },\n  ],\n};\n","module.exports = range;\n\n/*\n  range(0, 5); // [0, 1, 2, 3, 4]\n  range(5); // [0, 1, 2, 3, 4]\n  range(-5); // [0, -1, -2, -3, -4]\n  range(0, 20, 5) // [0, 5, 10, 15]\n  range(0, -20, -5) // [0, -5, -10, -15]\n*/\n\nfunction range(start, stop, step) {\n  if (start != null && typeof start != 'number') {\n    throw new Error('start must be a number or null');\n  }\n  if (stop != null && typeof stop != 'number') {\n    throw new Error('stop must be a number or null');\n  }\n  if (step != null && typeof step != 'number') {\n    throw new Error('step must be a number or null');\n  }\n  if (stop == null) {\n    stop = start || 0;\n    start = 0;\n  }\n  if (step == null) {\n    step = stop > start ? 1 : -1;\n  }\n  var toReturn = [];\n  var increasing = start < stop; //← here’s the change\n  for (; increasing ? start < stop : start > stop; start += step) {\n    toReturn.push(start);\n  }\n  return toReturn;\n}\n","/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]';\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/**\n * A faster alternative to `Function#apply`, this function invokes `func`\n * with the `this` binding of `thisArg` and the arguments of `args`.\n *\n * @private\n * @param {Function} func The function to invoke.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {Array} args The arguments to invoke `func` with.\n * @returns {*} Returns the result of `func`.\n */\nfunction apply(func, thisArg, args) {\n  switch (args.length) {\n    case 0: return func.call(thisArg);\n    case 1: return func.call(thisArg, args[0]);\n    case 2: return func.call(thisArg, args[0], args[1]);\n    case 3: return func.call(thisArg, args[0], args[1], args[2]);\n  }\n  return func.apply(thisArg, args);\n}\n\n/**\n * A specialized version of `_.includes` for arrays without support for\n * specifying an index to search from.\n *\n * @private\n * @param {Array} [array] The array to inspect.\n * @param {*} target The value to search for.\n * @returns {boolean} Returns `true` if `target` is found, else `false`.\n */\nfunction arrayIncludes(array, value) {\n  var length = array ? array.length : 0;\n  return !!length && baseIndexOf(array, value, 0) > -1;\n}\n\n/**\n * This function is like `arrayIncludes` except that it accepts a comparator.\n *\n * @private\n * @param {Array} [array] The array to inspect.\n * @param {*} target The value to search for.\n * @param {Function} comparator The comparator invoked per element.\n * @returns {boolean} Returns `true` if `target` is found, else `false`.\n */\nfunction arrayIncludesWith(array, value, comparator) {\n  var index = -1,\n      length = array ? array.length : 0;\n\n  while (++index < length) {\n    if (comparator(value, array[index])) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * A specialized version of `_.map` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction arrayMap(array, iteratee) {\n  var index = -1,\n      length = array ? array.length : 0,\n      result = Array(length);\n\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\n\n/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\n/**\n * The base implementation of `_.findIndex` and `_.findLastIndex` without\n * support for iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Function} predicate The function invoked per iteration.\n * @param {number} fromIndex The index to search from.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseFindIndex(array, predicate, fromIndex, fromRight) {\n  var length = array.length,\n      index = fromIndex + (fromRight ? 1 : -1);\n\n  while ((fromRight ? index-- : ++index < length)) {\n    if (predicate(array[index], index, array)) {\n      return index;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `_.indexOf` without `fromIndex` bounds checks.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} value The value to search for.\n * @param {number} fromIndex The index to search from.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseIndexOf(array, value, fromIndex) {\n  if (value !== value) {\n    return baseFindIndex(array, baseIsNaN, fromIndex);\n  }\n  var index = fromIndex - 1,\n      length = array.length;\n\n  while (++index < length) {\n    if (array[index] === value) {\n      return index;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `_.isNaN` without support for number objects.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is `NaN`, else `false`.\n */\nfunction baseIsNaN(value) {\n  return value !== value;\n}\n\n/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\n/**\n * Checks if a cache value for `key` exists.\n *\n * @private\n * @param {Object} cache The cache to query.\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction cacheHas(cache, key) {\n  return cache.has(key);\n}\n\n/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\n/**\n * Checks if `value` is a host object in IE < 9.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a host object, else `false`.\n */\nfunction isHostObject(value) {\n  // Many host objects are `Object` objects that can coerce to strings\n  // despite having improperly defined `toString` methods.\n  var result = false;\n  if (value != null && typeof value.toString != 'function') {\n    try {\n      result = !!(value + '');\n    } catch (e) {}\n  }\n  return result;\n}\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype,\n    funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/** Built-in value references. */\nvar Symbol = root.Symbol,\n    propertyIsEnumerable = objectProto.propertyIsEnumerable,\n    splice = arrayProto.splice,\n    spreadableSymbol = Symbol ? Symbol.isConcatSpreadable : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/* Built-in method references that are verified to be native. */\nvar Map = getNative(root, 'Map'),\n    nativeCreate = getNative(Object, 'create');\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n}\n\n/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  return this.has(key) && delete this.__data__[key];\n}\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? data[key] !== undefined : hasOwnProperty.call(data, key);\n}\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n}\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  return true;\n}\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  return getMapData(this, key)['delete'](key);\n}\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  getMapData(this, key).set(key, value);\n  return this;\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\n/**\n *\n * Creates an array cache object to store unique values.\n *\n * @private\n * @constructor\n * @param {Array} [values] The values to cache.\n */\nfunction SetCache(values) {\n  var index = -1,\n      length = values ? values.length : 0;\n\n  this.__data__ = new MapCache;\n  while (++index < length) {\n    this.add(values[index]);\n  }\n}\n\n/**\n * Adds `value` to the array cache.\n *\n * @private\n * @name add\n * @memberOf SetCache\n * @alias push\n * @param {*} value The value to cache.\n * @returns {Object} Returns the cache instance.\n */\nfunction setCacheAdd(value) {\n  this.__data__.set(value, HASH_UNDEFINED);\n  return this;\n}\n\n/**\n * Checks if `value` is in the array cache.\n *\n * @private\n * @name has\n * @memberOf SetCache\n * @param {*} value The value to search for.\n * @returns {number} Returns `true` if `value` is found, else `false`.\n */\nfunction setCacheHas(value) {\n  return this.__data__.has(value);\n}\n\n// Add methods to `SetCache`.\nSetCache.prototype.add = SetCache.prototype.push = setCacheAdd;\nSetCache.prototype.has = setCacheHas;\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of methods like `_.difference` without support\n * for excluding multiple arrays or iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Array} values The values to exclude.\n * @param {Function} [iteratee] The iteratee invoked per element.\n * @param {Function} [comparator] The comparator invoked per element.\n * @returns {Array} Returns the new array of filtered values.\n */\nfunction baseDifference(array, values, iteratee, comparator) {\n  var index = -1,\n      includes = arrayIncludes,\n      isCommon = true,\n      length = array.length,\n      result = [],\n      valuesLength = values.length;\n\n  if (!length) {\n    return result;\n  }\n  if (iteratee) {\n    values = arrayMap(values, baseUnary(iteratee));\n  }\n  if (comparator) {\n    includes = arrayIncludesWith;\n    isCommon = false;\n  }\n  else if (values.length >= LARGE_ARRAY_SIZE) {\n    includes = cacheHas;\n    isCommon = false;\n    values = new SetCache(values);\n  }\n  outer:\n  while (++index < length) {\n    var value = array[index],\n        computed = iteratee ? iteratee(value) : value;\n\n    value = (comparator || value !== 0) ? value : 0;\n    if (isCommon && computed === computed) {\n      var valuesIndex = valuesLength;\n      while (valuesIndex--) {\n        if (values[valuesIndex] === computed) {\n          continue outer;\n        }\n      }\n      result.push(value);\n    }\n    else if (!includes(values, computed, comparator)) {\n      result.push(value);\n    }\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.flatten` with support for restricting flattening.\n *\n * @private\n * @param {Array} array The array to flatten.\n * @param {number} depth The maximum recursion depth.\n * @param {boolean} [predicate=isFlattenable] The function invoked per iteration.\n * @param {boolean} [isStrict] Restrict to values that pass `predicate` checks.\n * @param {Array} [result=[]] The initial result value.\n * @returns {Array} Returns the new flattened array.\n */\nfunction baseFlatten(array, depth, predicate, isStrict, result) {\n  var index = -1,\n      length = array.length;\n\n  predicate || (predicate = isFlattenable);\n  result || (result = []);\n\n  while (++index < length) {\n    var value = array[index];\n    if (depth > 0 && predicate(value)) {\n      if (depth > 1) {\n        // Recursively flatten arrays (susceptible to call stack limits).\n        baseFlatten(value, depth - 1, predicate, isStrict, result);\n      } else {\n        arrayPush(result, value);\n      }\n    } else if (!isStrict) {\n      result[result.length] = value;\n    }\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = (isFunction(value) || isHostObject(value)) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\n/**\n * The base implementation of `_.rest` which doesn't validate or coerce arguments.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @returns {Function} Returns the new function.\n */\nfunction baseRest(func, start) {\n  start = nativeMax(start === undefined ? (func.length - 1) : start, 0);\n  return function() {\n    var args = arguments,\n        index = -1,\n        length = nativeMax(args.length - start, 0),\n        array = Array(length);\n\n    while (++index < length) {\n      array[index] = args[start + index];\n    }\n    index = -1;\n    var otherArgs = Array(start + 1);\n    while (++index < start) {\n      otherArgs[index] = args[index];\n    }\n    otherArgs[start] = array;\n    return apply(func, this, otherArgs);\n  };\n}\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\n/**\n * Checks if `value` is a flattenable `arguments` object or array.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is flattenable, else `false`.\n */\nfunction isFlattenable(value) {\n  return isArray(value) || isArguments(value) ||\n    !!(spreadableSymbol && value && value[spreadableSymbol]);\n}\n\n/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to process.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\n/**\n * Creates an array of `array` values not included in the other given arrays\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons. The order of result values is determined by the\n * order they occur in the first array.\n *\n * **Note:** Unlike `_.pullAll`, this method returns a new array.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to inspect.\n * @param {...Array} [values] The values to exclude.\n * @returns {Array} Returns the new array of filtered values.\n * @see _.without, _.xor\n * @example\n *\n * _.difference([2, 1], [2, 3]);\n * // => [1]\n */\nvar difference = baseRest(function(array, values) {\n  return isArrayLikeObject(array)\n    ? baseDifference(array, baseFlatten(values, 1, isArrayLikeObject, true))\n    : [];\n});\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nfunction isArguments(value) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  return isArrayLikeObject(value) && hasOwnProperty.call(value, 'callee') &&\n    (!propertyIsEnumerable.call(value, 'callee') || objectToString.call(value) == argsTag);\n}\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 8-9 which returns 'object' for typed array and other constructors.\n  var tag = isObject(value) ? objectToString.call(value) : '';\n  return tag == funcTag || tag == genTag;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\nmodule.exports = difference;\n","'use strict'\n\nvar load = require('audio-loader')\nvar player = require('sample-player')\n\n/**\n * Load a soundfont instrument. It returns a promise that resolves to a\n * instrument object.\n *\n * The instrument object returned by the promise has the following properties:\n *\n * - name: the instrument name\n * - play: A function to play notes from the buffer with the signature\n * `play(note, time, duration, options)`\n *\n *\n * The valid options are:\n *\n * - `format`: the soundfont format. 'mp3' by default. Can be 'ogg'\n * - `soundfont`: the soundfont name. 'MusyngKite' by default. Can be 'FluidR3_GM'\n * - `nameToUrl` <Function>: a function to convert from instrument names to URL\n * - `destination`: by default Soundfont uses the `audioContext.destination` but you can override it.\n * - `gain`: the gain of the player (1 by default)\n * - `notes`: an array of the notes to decode. It can be an array of strings\n * with note names or an array of numbers with midi note numbers. This is a\n * performance option: since decoding mp3 is a cpu intensive process, you can limit\n * limit the number of notes you want and reduce the time to load the instrument.\n *\n * @param {AudioContext} ac - the audio context\n * @param {String} name - the instrument name. For example: 'acoustic_grand_piano'\n * @param {Object} options - (Optional) the same options as Soundfont.loadBuffers\n * @return {Promise}\n *\n * @example\n * var Soundfont = require('sounfont-player')\n * Soundfont.instrument('marimba').then(function (marimba) {\n *   marimba.play('C4')\n * })\n */\nfunction instrument (ac, name, options) {\n  if (arguments.length === 1) return function (n, o) { return instrument(ac, n, o) }\n  var opts = options || {}\n  var isUrl = opts.isSoundfontURL || isSoundfontURL\n  var toUrl = opts.nameToUrl || nameToUrl\n  var url = isUrl(name) ? name : toUrl(name, opts.soundfont, opts.format)\n\n  return load(ac, url, { only: opts.only || opts.notes }).then(function (buffers) {\n    var p = player(ac, buffers, opts).connect(opts.destination ? opts.destination : ac.destination)\n    p.url = url\n    p.name = name\n    return p\n  })\n}\n\nfunction isSoundfontURL (name) {\n  return /\\.js(\\?.*)?$/i.test(name)\n}\n\n/**\n * Given an instrument name returns a URL to to the Benjamin Gleitzman's\n * package of [pre-rendered sound fonts](https://github.com/gleitz/midi-js-soundfonts)\n *\n * @param {String} name - instrument name\n * @param {String} soundfont - (Optional) the soundfont name. One of 'FluidR3_GM'\n * or 'MusyngKite' ('MusyngKite' by default)\n * @param {String} format - (Optional) Can be 'mp3' or 'ogg' (mp3 by default)\n * @returns {String} the Soundfont file url\n * @example\n * var Soundfont = require('soundfont-player')\n * Soundfont.nameToUrl('marimba', 'mp3')\n */\nfunction nameToUrl (name, sf, format) {\n  format = format === 'ogg' ? format : 'mp3'\n  sf = sf === 'FluidR3_GM' ? sf : 'MusyngKite'\n  return 'https://gleitz.github.io/midi-js-soundfonts/' + sf + '/' + name + '-' + format + '.js'\n}\n\n// In the 1.0.0 release it will be:\n// var Soundfont = {}\nvar Soundfont = require('./legacy')\nSoundfont.instrument = instrument\nSoundfont.nameToUrl = nameToUrl\n\nif (typeof module === 'object' && module.exports) module.exports = Soundfont\nif (typeof window !== 'undefined') window.Soundfont = Soundfont\n","'use strict'\n\nvar base64 = require('./base64')\nvar fetch = require('./fetch')\n\n// Given a regex, return a function that test if against a string\nfunction fromRegex (r) {\n  return function (o) { return typeof o === 'string' && r.test(o) }\n}\n// Try to apply a prefix to a name\nfunction prefix (pre, name) {\n  return typeof pre === 'string' ? pre + name\n    : typeof pre === 'function' ? pre(name)\n    : name\n}\n\n/**\n * Load one or more audio files\n *\n *\n * Possible option keys:\n *\n * - __from__ {Function|String}: a function or string to convert from file names to urls.\n * If is a string it will be prefixed to the name:\n * `load(ac, 'snare.mp3', { from: 'http://audio.net/samples/' })`\n * If it's a function it receives the file name and should return the url as string.\n * - __only__ {Array} - when loading objects, if provided, only the given keys\n * will be included in the decoded object:\n * `load(ac, 'piano.json', { only: ['C2', 'D2'] })`\n *\n * @param {AudioContext} ac - the audio context\n * @param {Object} source - the object to be loaded\n * @param {Object} options - (Optional) the load options for that object\n * @param {Object} defaultValue - (Optional) the default value to return as\n * in a promise if not valid loader found\n */\nfunction load (ac, source, options, defVal) {\n  var loader =\n    // Basic audio loading\n      isArrayBuffer(source) ? loadArrayBuffer\n    : isAudioFileName(source) ? loadAudioFile\n    : isPromise(source) ? loadPromise\n    // Compound objects\n    : isArray(source) ? loadArrayData\n    : isObject(source) ? loadObjectData\n    : isJsonFileName(source) ? loadJsonFile\n    // Base64 encoded audio\n    : isBase64Audio(source) ? loadBase64Audio\n    : isJsFileName(source) ? loadMidiJSFile\n    : null\n\n  var opts = options || {}\n  return loader ? loader(ac, source, opts)\n    : defVal ? Promise.resolve(defVal)\n    : Promise.reject('Source not valid (' + source + ')')\n}\nload.fetch = fetch\n\n// BASIC AUDIO LOADING\n// ===================\n\n// Load (decode) an array buffer\nfunction isArrayBuffer (o) { return o instanceof ArrayBuffer }\nfunction loadArrayBuffer (ac, array, options) {\n  return new Promise(function (done, reject) {\n    ac.decodeAudioData(array,\n      function (buffer) { done(buffer) },\n      function () { reject(\"Can't decode audio data (\" + array.slice(0, 30) + '...)') }\n    )\n  })\n}\n\n// Load an audio filename\nvar isAudioFileName = fromRegex(/\\.(mp3|wav|ogg)(\\?.*)?$/i)\nfunction loadAudioFile (ac, name, options) {\n  var url = prefix(options.from, name)\n  return load(ac, load.fetch(url, 'arraybuffer'), options)\n}\n\n// Load the result of a promise\nfunction isPromise (o) { return o && typeof o.then === 'function' }\nfunction loadPromise (ac, promise, options) {\n  return promise.then(function (value) {\n    return load(ac, value, options)\n  })\n}\n\n// COMPOUND OBJECTS\n// ================\n\n// Try to load all the items of an array\nvar isArray = Array.isArray\nfunction loadArrayData (ac, array, options) {\n  return Promise.all(array.map(function (data) {\n    return load(ac, data, options, data)\n  }))\n}\n\n// Try to load all the values of a key/value object\nfunction isObject (o) { return o && typeof o === 'object' }\nfunction loadObjectData (ac, obj, options) {\n  var dest = {}\n  var promises = Object.keys(obj).map(function (key) {\n    if (options.only && options.only.indexOf(key) === -1) return null\n    var value = obj[key]\n    return load(ac, value, options, value).then(function (audio) {\n      dest[key] = audio\n    })\n  })\n  return Promise.all(promises).then(function () { return dest })\n}\n\n// Load the content of a JSON file\nvar isJsonFileName = fromRegex(/\\.json(\\?.*)?$/i)\nfunction loadJsonFile (ac, name, options) {\n  var url = prefix(options.from, name)\n  return load(ac, load.fetch(url, 'text').then(JSON.parse), options)\n}\n\n// BASE64 ENCODED FORMATS\n// ======================\n\n// Load strings with Base64 encoded audio\nvar isBase64Audio = fromRegex(/^data:audio/)\nfunction loadBase64Audio (ac, source, options) {\n  var i = source.indexOf(',')\n  return load(ac, base64.decode(source.slice(i + 1)).buffer, options)\n}\n\n// Load .js files with MidiJS soundfont prerendered audio\nvar isJsFileName = fromRegex(/\\.js(\\?.*)?$/i)\nfunction loadMidiJSFile (ac, name, options) {\n  var url = prefix(options.from, name)\n  return load(ac, load.fetch(url, 'text').then(midiJsToJson), options)\n}\n\n// convert a MIDI.js javascript soundfont file to json\nfunction midiJsToJson (data) {\n  var begin = data.indexOf('MIDI.Soundfont.')\n  if (begin < 0) throw Error('Invalid MIDI.js Soundfont format')\n  begin = data.indexOf('=', begin) + 2\n  var end = data.lastIndexOf(',')\n  return JSON.parse(data.slice(begin, end) + '}')\n}\n\nif (typeof module === 'object' && module.exports) module.exports = load\nif (typeof window !== 'undefined') window.loadAudio = load\n","'use strict'\n\n// DECODE UTILITIES\nfunction b64ToUint6 (nChr) {\n  return nChr > 64 && nChr < 91 ? nChr - 65\n    : nChr > 96 && nChr < 123 ? nChr - 71\n    : nChr > 47 && nChr < 58 ? nChr + 4\n    : nChr === 43 ? 62\n    : nChr === 47 ? 63\n    : 0\n}\n\n// Decode Base64 to Uint8Array\n// ---------------------------\nfunction decode (sBase64, nBlocksSize) {\n  var sB64Enc = sBase64.replace(/[^A-Za-z0-9\\+\\/]/g, '')\n  var nInLen = sB64Enc.length\n  var nOutLen = nBlocksSize\n    ? Math.ceil((nInLen * 3 + 1 >> 2) / nBlocksSize) * nBlocksSize\n    : nInLen * 3 + 1 >> 2\n  var taBytes = new Uint8Array(nOutLen)\n\n  for (var nMod3, nMod4, nUint24 = 0, nOutIdx = 0, nInIdx = 0; nInIdx < nInLen; nInIdx++) {\n    nMod4 = nInIdx & 3\n    nUint24 |= b64ToUint6(sB64Enc.charCodeAt(nInIdx)) << 18 - 6 * nMod4\n    if (nMod4 === 3 || nInLen - nInIdx === 1) {\n      for (nMod3 = 0; nMod3 < 3 && nOutIdx < nOutLen; nMod3++, nOutIdx++) {\n        taBytes[nOutIdx] = nUint24 >>> (16 >>> nMod3 & 24) & 255\n      }\n      nUint24 = 0\n    }\n  }\n  return taBytes\n}\n\nmodule.exports = { decode: decode }\n","/* global XMLHttpRequest */\n'use strict'\n\n/**\n * Given a url and a return type, returns a promise to the content of the url\n * Basically it wraps a XMLHttpRequest into a Promise\n *\n * @param {String} url\n * @param {String} type - can be 'text' or 'arraybuffer'\n * @return {Promise}\n */\nmodule.exports = function (url, type) {\n  return new Promise(function (done, reject) {\n    var req = new XMLHttpRequest()\n    if (type) req.responseType = type\n\n    req.open('GET', url)\n    req.onload = function () {\n      req.status === 200 ? done(req.response) : reject(Error(req.statusText))\n    }\n    req.onerror = function () { reject(Error('Network Error')) }\n    req.send()\n  })\n}\n","'use strict'\n\nvar player = require('./player')\nvar events = require('./events')\nvar notes = require('./notes')\nvar scheduler = require('./scheduler')\nvar midi = require('./midi')\n\nfunction SamplePlayer (ac, source, options) {\n  return midi(scheduler(notes(events(player(ac, source, options)))))\n}\n\nif (typeof module === 'object' && module.exports) module.exports = SamplePlayer\nif (typeof window !== 'undefined') window.SamplePlayer = SamplePlayer\n","/* global AudioBuffer */\n'use strict'\n\nvar ADSR = require('adsr')\n\nvar EMPTY = {}\nvar DEFAULTS = {\n  gain: 1,\n  attack: 0.01,\n  decay: 0.1,\n  sustain: 0.9,\n  release: 0.3,\n  loop: false,\n  cents: 0,\n  loopStart: 0,\n  loopEnd: 0\n}\n\n/**\n * Create a sample player.\n *\n * @param {AudioContext} ac - the audio context\n * @param {ArrayBuffer|Object<String,ArrayBuffer>} source\n * @param {Onject} options - (Optional) an options object\n * @return {player} the player\n * @example\n * var SamplePlayer = require('sample-player')\n * var ac = new AudioContext()\n * var snare = SamplePlayer(ac, <AudioBuffer>)\n * snare.play()\n */\nfunction SamplePlayer (ac, source, options) {\n  var connected = false\n  var nextId = 0\n  var tracked = {}\n  var out = ac.createGain()\n  out.gain.value = 1\n\n  var opts = Object.assign({}, DEFAULTS, options)\n\n  /**\n   * @namespace\n   */\n  var player = { context: ac, out: out, opts: opts }\n  if (source instanceof AudioBuffer) player.buffer = source\n  else player.buffers = source\n\n  /**\n   * Start a sample buffer.\n   *\n   * The returned object has a function `stop(when)` to stop the sound.\n   *\n   * @param {String} name - the name of the buffer. If the source of the\n   * SamplePlayer is one sample buffer, this parameter is not required\n   * @param {Float} when - (Optional) when to start (current time if by default)\n   * @param {Object} options - additional sample playing options\n   * @return {AudioNode} an audio node with a `stop` function\n   * @example\n   * var sample = player(ac, <AudioBuffer>).connect(ac.destination)\n   * sample.start()\n   * sample.start(5, { gain: 0.7 }) // name not required since is only one AudioBuffer\n   * @example\n   * var drums = player(ac, { snare: <AudioBuffer>, kick: <AudioBuffer>, ... }).connect(ac.destination)\n   * drums.start('snare')\n   * drums.start('snare', 0, { gain: 0.3 })\n   */\n  player.start = function (name, when, options) {\n    // if only one buffer, reorder arguments\n    if (player.buffer && name !== null) return player.start(null, name, when)\n\n    var buffer = name ? player.buffers[name] : player.buffer\n    if (!buffer) {\n      console.warn('Buffer ' + name + ' not found.')\n      return\n    } else if (!connected) {\n      console.warn('SamplePlayer not connected to any node.')\n      return\n    }\n\n    var opts = options || EMPTY\n    when = Math.max(ac.currentTime, when || 0)\n    player.emit('start', when, name, opts)\n    var node = createNode(name, buffer, opts)\n    node.id = track(name, node)\n    node.env.start(when)\n    node.source.start(when)\n    player.emit('started', when, node.id, node)\n    if (opts.duration) node.stop(when + opts.duration)\n    return node\n  }\n\n  // NOTE: start will be override so we can't copy the function reference\n  // this is obviously not a good design, so this code will be gone soon.\n  /**\n   * An alias for `player.start`\n   * @see player.start\n   * @since 0.3.0\n   */\n  player.play = function (name, when, options) {\n    return player.start(name, when, options)\n  }\n\n  /**\n   * Stop some or all samples\n   *\n   * @param {Float} when - (Optional) an absolute time in seconds (or currentTime\n   * if not specified)\n   * @param {Array} nodes - (Optional) an array of nodes or nodes ids to stop\n   * @return {Array} an array of ids of the stoped samples\n   *\n   * @example\n   * var longSound = player(ac, <AudioBuffer>).connect(ac.destination)\n   * longSound.start(ac.currentTime)\n   * longSound.start(ac.currentTime + 1)\n   * longSound.start(ac.currentTime + 2)\n   * longSound.stop(ac.currentTime + 3) // stop the three sounds\n   */\n  player.stop = function (when, ids) {\n    var node\n    ids = ids || Object.keys(tracked)\n    return ids.map(function (id) {\n      node = tracked[id]\n      if (!node) return null\n      node.stop(when)\n      return node.id\n    })\n  }\n  /**\n   * Connect the player to a destination node\n   *\n   * @param {AudioNode} destination - the destination node\n   * @return {AudioPlayer} the player\n   * @chainable\n   * @example\n   * var sample = player(ac, <AudioBuffer>).connect(ac.destination)\n   */\n  player.connect = function (dest) {\n    connected = true\n    out.connect(dest)\n    return player\n  }\n\n  player.emit = function (event, when, obj, opts) {\n    if (player.onevent) player.onevent(event, when, obj, opts)\n    var fn = player['on' + event]\n    if (fn) fn(when, obj, opts)\n  }\n\n  return player\n\n  // =============== PRIVATE FUNCTIONS ============== //\n\n  function track (name, node) {\n    node.id = nextId++\n    tracked[node.id] = node\n    node.source.onended = function () {\n      var now = ac.currentTime\n      node.source.disconnect()\n      node.env.disconnect()\n      node.disconnect()\n      player.emit('ended', now, node.id, node)\n    }\n    return node.id\n  }\n\n  function createNode (name, buffer, options) {\n    var node = ac.createGain()\n    node.gain.value = 0 // the envelope will control the gain\n    node.connect(out)\n\n    node.env = envelope(ac, options, opts)\n    node.env.connect(node.gain)\n\n    node.source = ac.createBufferSource()\n    node.source.buffer = buffer\n    node.source.connect(node)\n    node.source.loop = options.loop || opts.loop\n    node.source.playbackRate.value = centsToRate(options.cents || opts.cents)\n    node.source.loopStart = options.loopStart || opts.loopStart\n    node.source.loopEnd = options.loopEnd || opts.loopEnd\n    node.stop = function (when) {\n      var time = when || ac.currentTime\n      player.emit('stop', time, name)\n      var stopAt = node.env.stop(time)\n      node.source.stop(stopAt)\n    }\n    return node\n  }\n}\n\nfunction isNum (x) { return typeof x === 'number' }\nvar PARAMS = ['attack', 'decay', 'sustain', 'release']\nfunction envelope (ac, options, opts) {\n  var env = ADSR(ac)\n  var adsr = options.adsr || opts.adsr\n  PARAMS.forEach(function (name, i) {\n    if (adsr) env[name] = adsr[i]\n    else env[name] = options[name] || opts[name]\n  })\n  env.value.value = isNum(options.gain) ? options.gain\n    : isNum(opts.gain) ? opts.gain : 1\n  return env\n}\n\n/*\n * Get playback rate for a given pitch change (in cents)\n * Basic [math](http://www.birdsoft.demon.co.uk/music/samplert.htm):\n * f2 = f1 * 2^( C / 1200 )\n */\nfunction centsToRate (cents) { return cents ? Math.pow(2, cents / 1200) : 1 }\n\nmodule.exports = SamplePlayer\n","module.exports = ADSR\n\nfunction ADSR(audioContext){\n  var node = audioContext.createGain()\n\n  var voltage = node._voltage = getVoltage(audioContext)\n  var value = scale(voltage)\n  var startValue = scale(voltage)\n  var endValue = scale(voltage)\n\n  node._startAmount = scale(startValue)\n  node._endAmount = scale(endValue)\n\n  node._multiplier = scale(value)\n  node._multiplier.connect(node)\n  node._startAmount.connect(node)\n  node._endAmount.connect(node)\n\n  node.value = value.gain\n  node.startValue = startValue.gain\n  node.endValue = endValue.gain\n\n  node.startValue.value = 0\n  node.endValue.value = 0\n\n  Object.defineProperties(node, props)\n  return node\n}\n\nvar props = {\n\n  attack: { value: 0, writable: true },\n  decay: { value: 0, writable: true },\n  sustain: { value: 1, writable: true },\n  release: {value: 0, writable: true },\n\n  getReleaseDuration: {\n    value: function(){\n      return this.release\n    }\n  },\n\n  start: {\n    value: function(at){\n      var target = this._multiplier.gain\n      var startAmount = this._startAmount.gain\n      var endAmount = this._endAmount.gain\n\n      this._voltage.start(at)\n      this._decayFrom = this._decayFrom = at+this.attack\n      this._startedAt = at\n\n      var sustain = this.sustain\n\n      target.cancelScheduledValues(at)\n      startAmount.cancelScheduledValues(at)\n      endAmount.cancelScheduledValues(at)\n\n      endAmount.setValueAtTime(0, at)\n\n      if (this.attack){\n        target.setValueAtTime(0, at)\n        target.linearRampToValueAtTime(1, at + this.attack)\n\n        startAmount.setValueAtTime(1, at)\n        startAmount.linearRampToValueAtTime(0, at + this.attack)\n      } else {\n        target.setValueAtTime(1, at)\n        startAmount.setValueAtTime(0, at)\n      }\n\n      if (this.decay){\n        target.setTargetAtTime(sustain, this._decayFrom, getTimeConstant(this.decay))\n      }\n    }\n  },\n\n  stop: {\n    value: function(at, isTarget){\n      if (isTarget){\n        at = at - this.release\n      }\n\n      var endTime = at + this.release\n      if (this.release){\n\n        var target = this._multiplier.gain\n        var startAmount = this._startAmount.gain\n        var endAmount = this._endAmount.gain\n\n        target.cancelScheduledValues(at)\n        startAmount.cancelScheduledValues(at)\n        endAmount.cancelScheduledValues(at)\n\n        var expFalloff = getTimeConstant(this.release)\n\n        // truncate attack (required as linearRamp is removed by cancelScheduledValues)\n        if (this.attack && at < this._decayFrom){\n          var valueAtTime = getValue(0, 1, this._startedAt, this._decayFrom, at)\n          target.linearRampToValueAtTime(valueAtTime, at)\n          startAmount.linearRampToValueAtTime(1-valueAtTime, at)\n          startAmount.setTargetAtTime(0, at, expFalloff)\n        }\n\n        endAmount.setTargetAtTime(1, at, expFalloff)\n        target.setTargetAtTime(0, at, expFalloff)\n      }\n\n      this._voltage.stop(endTime)\n      return endTime\n    }\n  },\n\n  onended: {\n    get: function(){\n      return this._voltage.onended\n    },\n    set: function(value){\n      this._voltage.onended = value\n    }\n  }\n\n}\n\nvar flat = new Float32Array([1,1])\nfunction getVoltage(context){\n  var voltage = context.createBufferSource()\n  var buffer = context.createBuffer(1, 2, context.sampleRate)\n  buffer.getChannelData(0).set(flat)\n  voltage.buffer = buffer\n  voltage.loop = true\n  return voltage\n}\n\nfunction scale(node){\n  var gain = node.context.createGain()\n  node.connect(gain)\n  return gain\n}\n\nfunction getTimeConstant(time){\n  return Math.log(time+1)/Math.log(100)\n}\n\nfunction getValue(start, end, fromTime, toTime, at){\n  var difference = end - start\n  var time = toTime - fromTime\n  var truncateTime = at - fromTime\n  var phase = truncateTime / time\n  var value = start + phase * difference\n\n  if (value <= start) {\n      value = start\n  }\n  if (value >= end) {\n      value = end\n  }\n\n  return value\n}\n","\nmodule.exports = function (player) {\n  /**\n   * Adds a listener of an event\n   * @chainable\n   * @param {String} event - the event name\n   * @param {Function} callback - the event handler\n   * @return {SamplePlayer} the player\n   * @example\n   * player.on('start', function(time, note) {\n   *   console.log(time, note)\n   * })\n   */\n  player.on = function (event, cb) {\n    if (arguments.length === 1 && typeof event === 'function') return player.on('event', event)\n    var prop = 'on' + event\n    var old = player[prop]\n    player[prop] = old ? chain(old, cb) : cb\n    return player\n  }\n  return player\n}\n\nfunction chain (fn1, fn2) {\n  return function (a, b, c, d) { fn1(a, b, c, d); fn2(a, b, c, d) }\n}\n","'use strict'\n\nvar note = require('note-parser')\nvar isMidi = function (n) { return n !== null && n !== [] && n >= 0 && n < 129 }\nvar toMidi = function (n) { return isMidi(n) ? +n : note.midi(n) }\n\n// Adds note name to midi conversion\nmodule.exports = function (player) {\n  if (player.buffers) {\n    var map = player.opts.map\n    var toKey = typeof map === 'function' ? map : toMidi\n    var mapper = function (name) {\n      return name ? toKey(name) || name : null\n    }\n\n    player.buffers = mapBuffers(player.buffers, mapper)\n    var start = player.start\n    player.start = function (name, when, options) {\n      var key = mapper(name)\n      var dec = key % 1\n      if (dec) {\n        key = Math.floor(key)\n        options = Object.assign(options || {}, { cents: Math.floor(dec * 100) })\n      }\n      return start(key, when, options)\n    }\n  }\n  return player\n}\n\nfunction mapBuffers (buffers, toKey) {\n  return Object.keys(buffers).reduce(function (mapped, name) {\n    mapped[toKey(name)] = buffers[name]\n    return mapped\n  }, {})\n}\n","'use strict'\n\nvar REGEX = /^([a-gA-G])(#{1,}|b{1,}|x{1,}|)(-?\\d*)\\s*(.*)\\s*$/\n/**\n * A regex for matching note strings in scientific notation.\n *\n * @name regex\n * @function\n * @return {RegExp} the regexp used to parse the note name\n *\n * The note string should have the form `letter[accidentals][octave][element]`\n * where:\n *\n * - letter: (Required) is a letter from A to G either upper or lower case\n * - accidentals: (Optional) can be one or more `b` (flats), `#` (sharps) or `x` (double sharps).\n * They can NOT be mixed.\n * - octave: (Optional) a positive or negative integer\n * - element: (Optional) additionally anything after the duration is considered to\n * be the element name (for example: 'C2 dorian')\n *\n * The executed regex contains (by array index):\n *\n * - 0: the complete string\n * - 1: the note letter\n * - 2: the optional accidentals\n * - 3: the optional octave\n * - 4: the rest of the string (trimmed)\n *\n * @example\n * var parser = require('note-parser')\n * parser.regex.exec('c#4')\n * // => ['c#4', 'c', '#', '4', '']\n * parser.regex.exec('c#4 major')\n * // => ['c#4major', 'c', '#', '4', 'major']\n * parser.regex().exec('CMaj7')\n * // => ['CMaj7', 'C', '', '', 'Maj7']\n */\nfunction regex () { return REGEX }\n\nvar SEMITONES = [0, 2, 4, 5, 7, 9, 11]\n/**\n * Parse a note name in scientific notation an return it's components,\n * and some numeric properties including midi number and frequency.\n *\n * @name parse\n * @function\n * @param {String} note - the note string to be parsed\n * @param {Boolean} isTonic - true if the note is the tonic of something.\n * If true, en extra tonicOf property is returned. It's false by default.\n * @param {Float} tunning - The frequency of A4 note to calculate frequencies.\n * By default it 440.\n * @return {Object} the parsed note name or null if not a valid note\n *\n * The parsed note name object will ALWAYS contains:\n * - letter: the uppercase letter of the note\n * - acc: the accidentals of the note (only sharps or flats)\n * - pc: the pitch class (letter + acc)\n * - step: s a numeric representation of the letter. It's an integer from 0 to 6\n * where 0 = C, 1 = D ... 6 = B\n * - alt: a numeric representation of the accidentals. 0 means no alteration,\n * positive numbers are for sharps and negative for flats\n * - chroma: a numeric representation of the pitch class. It's like midi for\n * pitch classes. 0 = C, 1 = C#, 2 = D ... It can have negative values: -1 = Cb.\n * Can detect pitch class enhramonics.\n *\n * If the note has octave, the parser object will contain:\n * - oct: the octave number (as integer)\n * - midi: the midi number\n * - freq: the frequency (using tuning parameter as base)\n *\n * If the parameter `isTonic` is set to true, the parsed object will contain:\n * - tonicOf: the rest of the string that follows note name (left and right trimmed)\n *\n * @example\n * var parse = require('note-parser').parse\n * parse('Cb4')\n * // => { letter: 'C', acc: 'b', pc: 'Cb', step: 0, alt: -1, chroma: -1,\n *         oct: 4, midi: 59, freq: 246.94165062806206 }\n * // if no octave, no midi, no freq\n * parse('fx')\n * // => { letter: 'F', acc: '##', pc: 'F##', step: 3, alt: 2, chroma: 7 })\n */\nfunction parse (str, isTonic, tuning) {\n  if (typeof str !== 'string') return null\n  var m = REGEX.exec(str)\n  if (!m || !isTonic && m[4]) return null\n\n  var p = { letter: m[1].toUpperCase(), acc: m[2].replace(/x/g, '##') }\n  p.pc = p.letter + p.acc\n  p.step = (p.letter.charCodeAt(0) + 3) % 7\n  p.alt = p.acc[0] === 'b' ? -p.acc.length : p.acc.length\n  p.chroma = SEMITONES[p.step] + p.alt\n  if (m[3]) {\n    p.oct = +m[3]\n    p.midi = p.chroma + 12 * (p.oct + 1)\n    p.freq = midiToFreq(p.midi, tuning)\n  }\n  if (isTonic) p.tonicOf = m[4]\n  return p\n}\n\n/**\n * Given a midi number, return its frequency\n * @param {Integer} midi - midi note number\n * @param {Float} tuning - (Optional) the A4 tuning (440Hz by default)\n * @return {Float} frequency in hertzs\n */\nfunction midiToFreq (midi, tuning) {\n  return Math.pow(2, (midi - 69) / 12) * (tuning || 440)\n}\n\nvar parser = { parse: parse, regex: regex, midiToFreq: midiToFreq }\nvar FNS = ['letter', 'acc', 'pc', 'step', 'alt', 'chroma', 'oct', 'midi', 'freq']\nFNS.forEach(function (name) {\n  parser[name] = function (src) {\n    var p = parse(src)\n    return p && (typeof p[name] !== 'undefined') ? p[name] : null\n  }\n})\n\nmodule.exports = parser\n\n// extra API docs\n/**\n * Get midi of a note\n *\n * @name midi\n * @function\n * @param {String} note - the note name\n * @return {Integer} the midi number of the note or null if not a valid note\n * or the note does NOT contains octave\n * @example\n * var parser = require('note-parser')\n * parser.midi('A4') // => 69\n * parser.midi('A') // => null\n */\n/**\n * Get freq of a note in hertzs (in a well tempered 440Hz A4)\n *\n * @name freq\n * @function\n * @param {String} note - the note name\n * @return {Float} the freq of the number if hertzs or null if not valid note\n * or the note does NOT contains octave\n * @example\n * var parser = require('note-parser')\n * parser.freq('A4') // => 440\n * parser.freq('A') // => null\n */\n","'use strict'\n\nvar isArr = Array.isArray\nvar isObj = function (o) { return o && typeof o === 'object' }\nvar OPTS = {}\n\nmodule.exports = function (player) {\n  /**\n   * Schedule a list of events to be played at specific time.\n   *\n   * It supports three formats of events for the events list:\n   *\n   * - An array with [time, note]\n   * - An array with [time, object]\n   * - An object with { time: ?, [name|note|midi|key]: ? }\n   *\n   * @param {Float} time - an absolute time to start (or AudioContext's\n   * currentTime if provided number is 0)\n   * @param {Array} events - the events list.\n   * @return {Array} an array of ids\n   *\n   * @example\n   * // Event format: [time, note]\n   * var piano = player(ac, ...).connect(ac.destination)\n   * piano.schedule(0, [ [0, 'C2'], [0.5, 'C3'], [1, 'C4'] ])\n   *\n   * @example\n   * // Event format: an object { time: ?, name: ? }\n   * var drums = player(ac, ...).connect(ac.destination)\n   * drums.schedule(0, [\n   *   { name: 'kick', time: 0 },\n   *   { name: 'snare', time: 0.5 },\n   *   { name: 'kick', time: 1 },\n   *   { name: 'snare', time: 1.5 }\n   * ])\n   */\n  player.schedule = function (time, events) {\n    var now = player.context.currentTime\n    var when = time < now ? now : time\n    player.emit('schedule', when, events)\n    var t, o, note, opts\n    return events.map(function (event) {\n      if (!event) return null\n      else if (isArr(event)) {\n        t = event[0]; o = event[1]\n      } else {\n        t = event.time; o = event\n      }\n\n      if (isObj(o)) {\n        note = o.name || o.key || o.note || o.midi || null\n        opts = o\n      } else {\n        note = o\n        opts = OPTS\n      }\n\n      return player.start(note, when + (t || 0), opts)\n    })\n  }\n  return player\n}\n","var midimessage = require('midimessage')\n\nmodule.exports = function (player) {\n  /**\n  * Connect a player to a midi input\n  *\n  * The options accepts:\n  *\n  * - channel: the channel to listen to. Listen to all channels by default.\n  *\n  * @param {MIDIInput} input\n  * @param {Object} options - (Optional)\n  * @return {SamplePlayer} the player\n  * @example\n  * var piano = player(...)\n  * window.navigator.requestMIDIAccess().then(function (midiAccess) {\n  *   midiAccess.inputs.forEach(function (midiInput) {\n  *     piano.listenToMidi(midiInput)\n  *   })\n  * })\n  */\n  player.listenToMidi = function (input, options) {\n    var started = {}\n    var opts = options || {}\n    var gain = opts.gain || function (vel) { return vel / 127 }\n\n    input.onmidimessage = function (msg) {\n      var mm = msg.messageType ? msg : midimessage(msg)\n      if (mm.messageType === 'noteon' && mm.velocity === 0) {\n        mm.messageType = 'noteoff'\n      }\n      if (opts.channel && mm.channel !== opts.channel) return\n\n      switch (mm.messageType) {\n        case 'noteon':\n          started[mm.key] = player.play(mm.key, 0, { gain: gain(mm.velocity) })\n          break\n        case 'noteoff':\n          if (started[mm.key]) {\n            started[mm.key].stop()\n            delete started[mm.key]\n          }\n          break\n      }\n    }\n    return player\n  }\n  return player\n}\n","(function(e){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=e()}else if(typeof define===\"function\"&&define.amd){define([],e)}else{var t;if(typeof window!==\"undefined\"){t=window}else if(typeof global!==\"undefined\"){t=global}else if(typeof self!==\"undefined\"){t=self}else{t=this}t.midimessage=e()}})(function(){var e,t,s;return function o(e,t,s){function a(n,i){if(!t[n]){if(!e[n]){var l=typeof require==\"function\"&&require;if(!i&&l)return l(n,!0);if(r)return r(n,!0);var h=new Error(\"Cannot find module '\"+n+\"'\");throw h.code=\"MODULE_NOT_FOUND\",h}var c=t[n]={exports:{}};e[n][0].call(c.exports,function(t){var s=e[n][1][t];return a(s?s:t)},c,c.exports,o,e,t,s)}return t[n].exports}var r=typeof require==\"function\"&&require;for(var n=0;n<s.length;n++)a(s[n]);return a}({1:[function(e,t,s){\"use strict\";Object.defineProperty(s,\"__esModule\",{value:true});s[\"default\"]=function(e){function t(e){this._event=e;this._data=e.data;this.receivedTime=e.receivedTime;if(this._data&&this._data.length<2){console.warn(\"Illegal MIDI message of length\",this._data.length);return}this._messageCode=e.data[0]&240;this.channel=e.data[0]&15;switch(this._messageCode){case 128:this.messageType=\"noteoff\";this.key=e.data[1]&127;this.velocity=e.data[2]&127;break;case 144:this.messageType=\"noteon\";this.key=e.data[1]&127;this.velocity=e.data[2]&127;break;case 160:this.messageType=\"keypressure\";this.key=e.data[1]&127;this.pressure=e.data[2]&127;break;case 176:this.messageType=\"controlchange\";this.controllerNumber=e.data[1]&127;this.controllerValue=e.data[2]&127;if(this.controllerNumber===120&&this.controllerValue===0){this.channelModeMessage=\"allsoundoff\"}else if(this.controllerNumber===121){this.channelModeMessage=\"resetallcontrollers\"}else if(this.controllerNumber===122){if(this.controllerValue===0){this.channelModeMessage=\"localcontroloff\"}else{this.channelModeMessage=\"localcontrolon\"}}else if(this.controllerNumber===123&&this.controllerValue===0){this.channelModeMessage=\"allnotesoff\"}else if(this.controllerNumber===124&&this.controllerValue===0){this.channelModeMessage=\"omnimodeoff\"}else if(this.controllerNumber===125&&this.controllerValue===0){this.channelModeMessage=\"omnimodeon\"}else if(this.controllerNumber===126){this.channelModeMessage=\"monomodeon\"}else if(this.controllerNumber===127){this.channelModeMessage=\"polymodeon\"}break;case 192:this.messageType=\"programchange\";this.program=e.data[1];break;case 208:this.messageType=\"channelpressure\";this.pressure=e.data[1]&127;break;case 224:this.messageType=\"pitchbendchange\";var t=e.data[2]&127;var s=e.data[1]&127;this.pitchBend=(t<<8)+s;break}}return new t(e)};t.exports=s[\"default\"]},{}]},{},[1])(1)});\n//# sourceMappingURL=dist/index.js.map","'use strict'\n\nvar parser = require('note-parser')\n\n/**\n * Create a Soundfont object\n *\n * @param {AudioContext} context - the [audio context](https://developer.mozilla.org/en/docs/Web/API/AudioContext)\n * @param {Function} nameToUrl - (Optional) a function that maps the sound font name to the url\n * @return {Soundfont} a soundfont object\n */\nfunction Soundfont (ctx, nameToUrl) {\n  console.warn('new Soundfont() is deprected')\n  console.log('Please use Soundfont.instrument() instead of new Soundfont().instrument()')\n  if (!(this instanceof Soundfont)) return new Soundfont(ctx)\n\n  this.nameToUrl = nameToUrl || Soundfont.nameToUrl\n  this.ctx = ctx\n  this.instruments = {}\n  this.promises = []\n}\n\nSoundfont.prototype.onready = function (callback) {\n  console.warn('deprecated API')\n  console.log('Please use Promise.all(Soundfont.instrument(), Soundfont.instrument()).then() instead of new Soundfont().onready()')\n  Promise.all(this.promises).then(callback)\n}\n\nSoundfont.prototype.instrument = function (name, options) {\n  console.warn('new Soundfont().instrument() is deprecated.')\n  console.log('Please use Soundfont.instrument() instead.')\n  var ctx = this.ctx\n  name = name || 'default'\n  if (name in this.instruments) return this.instruments[name]\n  var inst = {name: name, play: oscillatorPlayer(ctx, options)}\n  this.instruments[name] = inst\n  if (name !== 'default') {\n    var promise = Soundfont.instrument(ctx, name, options).then(function (instrument) {\n      inst.play = instrument.play\n      return inst\n    })\n    this.promises.push(promise)\n    inst.onready = function (cb) {\n      console.warn('onready is deprecated. Use Soundfont.instrument().then()')\n      promise.then(cb)\n    }\n  } else {\n    inst.onready = function (cb) {\n      console.warn('onready is deprecated. Use Soundfont.instrument().then()')\n      cb()\n    }\n  }\n  return inst\n}\n\n/*\n * Load the buffers of a given instrument name. It returns a promise that resolves\n * to a hash with midi note numbers as keys, and audio buffers as values.\n *\n * @param {AudioContext} ac - the audio context\n * @param {String} name - the instrument name (it accepts an url if starts with \"http\")\n * @param {Object} options - (Optional) options object\n * @return {Promise} a promise that resolves to a Hash of { midiNoteNum: <AudioBuffer> }\n *\n * The options object accepts the following keys:\n *\n * - nameToUrl {Function}: a function to convert from instrument names to urls.\n * By default it uses Benjamin Gleitzman's package of\n * [pre-rendered sound fonts](https://github.com/gleitz/midi-js-soundfonts)\n * - notes {Array}: the list of note names to be decoded (all by default)\n *\n * @example\n * var Soundfont = require('soundfont-player')\n * Soundfont.loadBuffers(ctx, 'acoustic_grand_piano').then(function(buffers) {\n *  buffers[60] // => An <AudioBuffer> corresponding to note C4\n * })\n */\nfunction loadBuffers (ac, name, options) {\n  console.warn('Soundfont.loadBuffers is deprecate.')\n  console.log('Use Soundfont.instrument(..) and get buffers properties from the result.')\n  return Soundfont.instrument(ac, name, options).then(function (inst) {\n    return inst.buffers\n  })\n}\nSoundfont.loadBuffers = loadBuffers\n\n/**\n * Returns a function that plays an oscillator\n *\n * @param {AudioContext} ac - the audio context\n * @param {Hash} defaultOptions - (Optional) a hash of options:\n * - vcoType: the oscillator type (default: 'sine')\n * - gain: the output gain value (default: 0.4)\n  * - destination: the player destination (default: ac.destination)\n */\nfunction oscillatorPlayer (ctx, defaultOptions) {\n  defaultOptions = defaultOptions || {}\n  return function (note, time, duration, options) {\n    console.warn('The oscillator player is deprecated.')\n    console.log('Starting with version 0.9.0 you will have to wait until the soundfont is loaded to play sounds.')\n    var midi = note > 0 && note < 129 ? +note : parser.midi(note)\n    var freq = midi ? parser.midiToFreq(midi, 440) : null\n    if (!freq) return\n\n    duration = duration || 0.2\n\n    options = options || {}\n    var destination = options.destination || defaultOptions.destination || ctx.destination\n    var vcoType = options.vcoType || defaultOptions.vcoType || 'sine'\n    var gain = options.gain || defaultOptions.gain || 0.4\n\n    var vco = ctx.createOscillator()\n    vco.type = vcoType\n    vco.frequency.value = freq\n\n    /* VCA */\n    var vca = ctx.createGain()\n    vca.gain.value = gain\n\n    /* Connections */\n    vco.connect(vca)\n    vca.connect(destination)\n\n    vco.start(time)\n    if (duration > 0) vco.stop(time + duration)\n    return vco\n  }\n}\n\n/**\n * Given a note name, return the note midi number\n *\n * @name noteToMidi\n * @function\n * @param {String} noteName\n * @return {Integer} the note midi number or null if not a valid note name\n */\nSoundfont.noteToMidi = parser.midi\n\nmodule.exports = Soundfont\n","'use strict'\n\n// util\nfunction fillStr (s, num) { return Array(num + 1).join(s) }\nfunction isNum (x) { return typeof x === 'number' }\nfunction isStr (x) { return typeof x === 'string' }\nfunction isDef (x) { return typeof x !== 'undefined' }\nfunction midiToFreq (midi, tuning) {\n  return Math.pow(2, (midi - 69) / 12) * (tuning || 440)\n}\n\nvar REGEX = /^([a-gA-G])(#{1,}|b{1,}|x{1,}|)(-?\\d*)\\s*(.*)\\s*$/\n/**\n * A regex for matching note strings in scientific notation.\n *\n * @name regex\n * @function\n * @return {RegExp} the regexp used to parse the note name\n *\n * The note string should have the form `letter[accidentals][octave][element]`\n * where:\n *\n * - letter: (Required) is a letter from A to G either upper or lower case\n * - accidentals: (Optional) can be one or more `b` (flats), `#` (sharps) or `x` (double sharps).\n * They can NOT be mixed.\n * - octave: (Optional) a positive or negative integer\n * - element: (Optional) additionally anything after the duration is considered to\n * be the element name (for example: 'C2 dorian')\n *\n * The executed regex contains (by array index):\n *\n * - 0: the complete string\n * - 1: the note letter\n * - 2: the optional accidentals\n * - 3: the optional octave\n * - 4: the rest of the string (trimmed)\n *\n * @example\n * var parser = require('note-parser')\n * parser.regex.exec('c#4')\n * // => ['c#4', 'c', '#', '4', '']\n * parser.regex.exec('c#4 major')\n * // => ['c#4major', 'c', '#', '4', 'major']\n * parser.regex().exec('CMaj7')\n * // => ['CMaj7', 'C', '', '', 'Maj7']\n */\nexport function regex () { return REGEX }\n\nvar SEMITONES = [0, 2, 4, 5, 7, 9, 11]\n/**\n * Parse a note name in scientific notation an return it's components,\n * and some numeric properties including midi number and frequency.\n *\n * @name parse\n * @function\n * @param {String} note - the note string to be parsed\n * @param {Boolean} isTonic - true the strings it's supposed to contain a note number\n * and some category (for example an scale: 'C# major'). It's false by default,\n * but when true, en extra tonicOf property is returned with the category ('major')\n * @param {Float} tunning - The frequency of A4 note to calculate frequencies.\n * By default it 440.\n * @return {Object} the parsed note name or null if not a valid note\n *\n * The parsed note name object will ALWAYS contains:\n * - letter: the uppercase letter of the note\n * - acc: the accidentals of the note (only sharps or flats)\n * - pc: the pitch class (letter + acc)\n * - step: s a numeric representation of the letter. It's an integer from 0 to 6\n * where 0 = C, 1 = D ... 6 = B\n * - alt: a numeric representation of the accidentals. 0 means no alteration,\n * positive numbers are for sharps and negative for flats\n * - chroma: a numeric representation of the pitch class. It's like midi for\n * pitch classes. 0 = C, 1 = C#, 2 = D ... 11 = B. Can be used to find enharmonics\n * since, for example, chroma of 'Cb' and 'B' are both 11\n *\n * If the note has octave, the parser object will contain:\n * - oct: the octave number (as integer)\n * - midi: the midi number\n * - freq: the frequency (using tuning parameter as base)\n *\n * If the parameter `isTonic` is set to true, the parsed object will contain:\n * - tonicOf: the rest of the string that follows note name (left and right trimmed)\n *\n * @example\n * var parse = require('note-parser').parse\n * parse('Cb4')\n * // => { letter: 'C', acc: 'b', pc: 'Cb', step: 0, alt: -1, chroma: -1,\n *         oct: 4, midi: 59, freq: 246.94165062806206 }\n * // if no octave, no midi, no freq\n * parse('fx')\n * // => { letter: 'F', acc: '##', pc: 'F##', step: 3, alt: 2, chroma: 7 })\n */\nexport function parse (str, isTonic, tuning) {\n  if (typeof str !== 'string') return null\n  var m = REGEX.exec(str)\n  if (!m || (!isTonic && m[4])) return null\n\n  var p = { letter: m[1].toUpperCase(), acc: m[2].replace(/x/g, '##') }\n  p.pc = p.letter + p.acc\n  p.step = (p.letter.charCodeAt(0) + 3) % 7\n  p.alt = p.acc[0] === 'b' ? -p.acc.length : p.acc.length\n  var pos = SEMITONES[p.step] + p.alt\n  p.chroma = pos < 0 ? 12 + pos : pos % 12\n  if (m[3]) { // has octave\n    p.oct = +m[3]\n    p.midi = pos + 12 * (p.oct + 1)\n    p.freq = midiToFreq(p.midi, tuning)\n  }\n  if (isTonic) p.tonicOf = m[4]\n  return p\n}\n\nvar LETTERS = 'CDEFGAB'\nfunction accStr (n) { return !isNum(n) ? '' : n < 0 ? fillStr('b', -n) : fillStr('#', n) }\nfunction octStr (n) { return !isNum(n) ? '' : '' + n }\n\n/**\n * Create a string from a parsed object or `step, alteration, octave` parameters\n * @param {Object} obj - the parsed data object\n * @return {String} a note string or null if not valid parameters\n * @since 1.2\n * @example\n * parser.build(parser.parse('cb2')) // => 'Cb2'\n *\n * @example\n * // it accepts (step, alteration, octave) parameters:\n * parser.build(3) // => 'F'\n * parser.build(3, -1) // => 'Fb'\n * parser.build(3, -1, 4) // => 'Fb4'\n */\nexport function build (s, a, o) {\n  if (s === null || typeof s === 'undefined') return null\n  if (s.step) return build(s.step, s.alt, s.oct)\n  if (s < 0 || s > 6) return null\n  return LETTERS.charAt(s) + accStr(a) + octStr(o)\n}\n\n/**\n * Get midi of a note\n *\n * @name midi\n * @function\n * @param {String|Integer} note - the note name or midi number\n * @return {Integer} the midi number of the note or null if not a valid note\n * or the note does NOT contains octave\n * @example\n * var parser = require('note-parser')\n * parser.midi('A4') // => 69\n * parser.midi('A') // => null\n * @example\n * // midi numbers are bypassed (even as strings)\n * parser.midi(60) // => 60\n * parser.midi('60') // => 60\n */\nexport function midi (note) {\n  if ((isNum(note) || isStr(note)) && note >= 0 && note < 128) return +note\n  var p = parse(note)\n  return p && isDef(p.midi) ? p.midi : null\n}\n\n/**\n * Get freq of a note in hertzs (in a well tempered 440Hz A4)\n *\n * @name freq\n * @function\n * @param {String} note - the note name or note midi number\n * @param {String} tuning - (Optional) the A4 frequency (440 by default)\n * @return {Float} the freq of the number if hertzs or null if not valid note\n * @example\n * var parser = require('note-parser')\n * parser.freq('A4') // => 440\n * parser.freq('A') // => null\n * @example\n * // can change tuning (440 by default)\n * parser.freq('A4', 444) // => 444\n * parser.freq('A3', 444) // => 222\n * @example\n * // it accepts midi numbers (as numbers and as strings)\n * parser.freq(69) // => 440\n * parser.freq('69', 442) // => 442\n */\nexport function freq (note, tuning) {\n  var m = midi(note)\n  return m === null ? null : midiToFreq(m, tuning)\n}\n\nexport function letter (src) { return (parse(src) || {}).letter }\nexport function acc (src) { return (parse(src) || {}).acc }\nexport function pc (src) { return (parse(src) || {}).pc }\nexport function step (src) { return (parse(src) || {}).step }\nexport function alt (src) { return (parse(src) || {}).alt }\nexport function chroma (src) { return (parse(src) || {}).chroma }\nexport function oct (src) { return (parse(src) || {}).oct }\n","'use strict';\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar React = require('react');\nvar onElementResize = require('element-resize-event');\n\nvar defaultContainerStyle = {\n  width: '100%',\n  height: '100%',\n  padding: 0,\n  border: 0\n};\n\nfunction defaultGetWidth(element) {\n  return element.clientWidth;\n}\n\nfunction defaultGetHeight(element) {\n  return element.clientHeight;\n}\n\n/**\n * Wraps a react component and adds properties `containerHeight` and\n * `containerWidth`. Useful for responsive design. Properties update on\n * window resize. **Note** that the parent element must have either a\n * height or a width, or nothing will be rendered\n *\n * Can be used as a\n * [higher-order component](http://babeljs.io/blog/2015/06/07/react-on-es6-plus/#property-initializers)\n * or as an [ES7 class decorator](https://github.com/wycats/javascript-decorators)\n * (see examples)\n *\n * @param {object} [options]\n * @param {function} [options.getHeight] A function that is passed an element and returns element\n * height, where element is the wrapper div. Defaults to `(element) => element.clientHeight`\n * @param {function} [options.getWidth]  A function that is passed an element and returns element\n * width, where element is the wrapper div. Defaults to `(element) => element.clientWidth`\n * @param {object} [options.containerStyle] A style object for the `<div>` that will wrap your component.\n * The dimensions of this `div` are what are passed as props to your component. The default style is\n * `{ width: '100%', height: '100%', padding: 0, border: 0 }` which will cause the `div` to fill its\n * parent in most cases. If you are using a flexbox layout you will want to change this default style.\n * @param {string} [options.className] Control the class name set on the wrapper `<div>`\n * @param {boolean} [options.elementResize=false] Set true to watch the wrapper `div` for changes in\n * size which are not a result of window resizing - e.g. changes to the flexbox and other layout.\n * @return {function}                   A higher-order component that can be\n * used to enhance a react component `Dimensions()(MyComponent)`\n *\n * @example\n * // ES2015\n * import React from 'react'\n * import Dimensions from 'react-dimensions'\n *\n * class MyComponent extends React.Component {\n *   render() (\n *     <div\n *       containerWidth={this.props.containerWidth}\n *       containerHeight={this.props.containerHeight}\n *     >\n *     </div>\n *   )\n * }\n *\n * export default Dimensions()(MyComponent) // Enhanced component\n *\n * @example\n * // ES5\n * var React = require('react')\n * var Dimensions = require('react-dimensions')\n *\n * var MyComponent = React.createClass({\n *   render: function() {(\n *     <div\n *       containerWidth={this.props.containerWidth}\n *       containerHeight={this.props.containerHeight}\n *     >\n *     </div>\n *   )}\n * }\n *\n * module.exports = Dimensions()(MyComponent) // Enhanced component\n *\n */\nmodule.exports = function Dimensions() {\n  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      _ref$getHeight = _ref.getHeight,\n      getHeight = _ref$getHeight === undefined ? defaultGetHeight : _ref$getHeight,\n      _ref$getWidth = _ref.getWidth,\n      getWidth = _ref$getWidth === undefined ? defaultGetWidth : _ref$getWidth,\n      _ref$containerStyle = _ref.containerStyle,\n      containerStyle = _ref$containerStyle === undefined ? defaultContainerStyle : _ref$containerStyle,\n      _ref$className = _ref.className,\n      className = _ref$className === undefined ? null : _ref$className,\n      _ref$elementResize = _ref.elementResize,\n      elementResize = _ref$elementResize === undefined ? false : _ref$elementResize;\n\n  return function (ComposedComponent) {\n    return function (_React$Component) {\n      _inherits(DimensionsHOC, _React$Component);\n\n      function DimensionsHOC() {\n        var _ref2;\n\n        var _temp, _this, _ret;\n\n        _classCallCheck(this, DimensionsHOC);\n\n        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n\n        return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref2 = DimensionsHOC.__proto__ || Object.getPrototypeOf(DimensionsHOC)).call.apply(_ref2, [this].concat(args))), _this), _this.state = {}, _this.updateDimensions = function () {\n          var container = _this.refs.container;\n          var containerWidth = getWidth(container);\n          var containerHeight = getHeight(container);\n\n          if (containerWidth !== _this.state.containerWidth || containerHeight !== _this.state.containerHeight) {\n            _this.setState({ containerWidth: containerWidth, containerHeight: containerHeight });\n          }\n        }, _this.onResize = function () {\n          if (_this.rqf) return;\n          _this.rqf = _this.getWindow().requestAnimationFrame(function () {\n            _this.rqf = null;\n            _this.updateDimensions();\n          });\n        }, _temp), _possibleConstructorReturn(_this, _ret);\n      }\n      // ES7 Class properties\n      // http://babeljs.io/blog/2015/06/07/react-on-es6-plus/#property-initializers\n\n\n      // Using arrow functions and ES7 Class properties to autobind\n      // http://babeljs.io/blog/2015/06/07/react-on-es6-plus/#arrow-functions\n\n\n      _createClass(DimensionsHOC, [{\n        key: 'getWindow',\n\n\n        // If the component is mounted in a different window to the javascript\n        // context, as with https://github.com/JakeGinnivan/react-popout\n        // then the `window` global will be different from the `window` that\n        // contains the component.\n        // Depends on `defaultView` which is not supported <IE9\n        value: function getWindow() {\n          return this.refs.container ? this.refs.container.ownerDocument.defaultView || window : window;\n        }\n      }, {\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n          if (!this.refs.container) {\n            throw new Error('Cannot find container div');\n          }\n          this.updateDimensions();\n          if (elementResize) {\n            // Experimental: `element-resize-event` fires when an element resizes.\n            // It attaches its own window resize listener and also uses\n            // requestAnimationFrame, so we can just call `this.updateDimensions`.\n            onElementResize(this.refs.container, this.updateDimensions);\n          } else {\n            this.getWindow().addEventListener('resize', this.onResize, false);\n          }\n        }\n      }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n          this.getWindow().removeEventListener('resize', this.onResize);\n        }\n\n        /**\n         * Returns the underlying wrapped component instance.\n         * Useful if you need to access a method or property of the component\n         * passed to react-dimensions.\n         *\n         * @return {object} The rendered React component\n         **/\n\n      }, {\n        key: 'getWrappedInstance',\n        value: function getWrappedInstance() {\n          this.refs.wrappedInstance;\n        }\n      }, {\n        key: 'render',\n        value: function render() {\n          var _state = this.state,\n              containerWidth = _state.containerWidth,\n              containerHeight = _state.containerHeight;\n\n          if (!containerWidth && !containerHeight) {\n            console.warn('Wrapper div has no height or width, try overriding style with `containerStyle` option');\n          }\n          return React.createElement(\n            'div',\n            { className: className, style: containerStyle, ref: 'container' },\n            (containerWidth || containerHeight) && React.createElement(ComposedComponent, _extends({}, this.state, this.props, {\n              updateDimensions: this.updateDimensions,\n              ref: 'wrappedInstance'\n            }))\n          );\n        }\n      }]);\n\n      return DimensionsHOC;\n    }(React.Component);\n  };\n};\n","var requestFrame = (function () {\n  var window = this\n  var raf = window.requestAnimationFrame ||\n    window.mozRequestAnimationFrame ||\n    window.webkitRequestAnimationFrame ||\n    function fallbackRAF(func) {\n      return window.setTimeout(func, 20)\n    }\n  return function requestFrameFunction(func) {\n    return raf(func)\n  }\n})()\n\nvar cancelFrame = (function () {\n  var window = this\n  var cancel = window.cancelAnimationFrame ||\n    window.mozCancelAnimationFrame ||\n    window.webkitCancelAnimationFrame ||\n    window.clearTimeout\n  return function cancelFrameFunction(id) {\n    return cancel(id)\n  }\n})()\n\nfunction resizeListener(e) {\n  var win = e.target || e.srcElement\n  if (win.__resizeRAF__) {\n    cancelFrame(win.__resizeRAF__)\n  }\n  win.__resizeRAF__ = requestFrame(function () {\n    var trigger = win.__resizeTrigger__\n    trigger.__resizeListeners__.forEach(function (fn) {\n      fn.call(trigger, e)\n    })\n  })\n}\n\nvar exports = function exports(element, fn) {\n  var window = this\n  var document = window.document\n  var isIE\n\n  var attachEvent = document.attachEvent\n  if (typeof navigator !== 'undefined') {\n    isIE = navigator.userAgent.match(/Trident/) ||\n      navigator.userAgent.match(/Edge/)\n  }\n\n  function objectLoad() {\n    this.contentDocument.defaultView.__resizeTrigger__ = this.__resizeElement__\n    this.contentDocument.defaultView.addEventListener('resize', resizeListener)\n  }\n\n  if (!element.__resizeListeners__) {\n    element.__resizeListeners__ = []\n    if (attachEvent) {\n      element.__resizeTrigger__ = element\n      element.attachEvent('onresize', resizeListener)\n    } else {\n      if (getComputedStyle(element).position === 'static') {\n        element.style.position = 'relative'\n      }\n      var obj = (element.__resizeTrigger__ = document.createElement('object'))\n      obj.setAttribute(\n        'style',\n        'display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; pointer-events: none; z-index: -1; opacity: 0;'\n      )\n      obj.setAttribute('class', 'resize-sensor')\n      obj.__resizeElement__ = element\n      obj.onload = objectLoad\n      obj.type = 'text/html'\n      if (isIE) {\n        element.appendChild(obj)\n      }\n      obj.data = 'about:blank'\n      if (!isIE) {\n        element.appendChild(obj)\n      }\n    }\n  }\n  element.__resizeListeners__.push(fn)\n}\n\nmodule.exports = typeof window === 'undefined' ? exports : exports.bind(window)\n\nmodule.exports.unbind = function (element, fn) {\n  var attachEvent = document.attachEvent\n  if (fn) {\n    element.__resizeListeners__.splice(\n      element.__resizeListeners__.indexOf(fn),\n      1\n    )\n  } else {\n    element.__resizeListeners__ = []\n  }\n  if (!element.__resizeListeners__.length) {\n    if (attachEvent) {\n      element.detachEvent('onresize', resizeListener)\n    } else {\n      element.__resizeTrigger__.contentDocument.defaultView.removeEventListener(\n        'resize',\n        resizeListener\n      )\n      delete element.__resizeTrigger__.contentDocument.defaultView.__resizeTrigger__\n      element.__resizeTrigger__ = !element.removeChild(\n        element.__resizeTrigger__\n      )\n    }\n    delete element.__resizeListeners__\n  }\n}\n","import arrayWithoutHoles from \"./arrayWithoutHoles\";\nimport iterableToArray from \"./iterableToArray\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nimport nonIterableSpread from \"./nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import arrayLikeToArray from \"./arrayLikeToArray\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _domConfetti = require(\"dom-confetti\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar style = {\n  position: \"relative\"\n};\n\nvar Confetti = function (_Component) {\n  _inherits(Confetti, _Component);\n\n  function Confetti(props) {\n    _classCallCheck(this, Confetti);\n\n    var _this = _possibleConstructorReturn(this, (Confetti.__proto__ || Object.getPrototypeOf(Confetti)).call(this, props));\n\n    _this.setRef = _this.setRef.bind(_this);\n    return _this;\n  }\n\n  _createClass(Confetti, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      if (!prevProps.active && this.props.active) {\n        (0, _domConfetti.confetti)(this.container, this.props.config);\n      }\n    }\n  }, {\n    key: \"setRef\",\n    value: function setRef(ref) {\n      this.container = ref;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return _react2.default.createElement(\"div\", { className: this.props.className, style: style, ref: this.setRef });\n    }\n  }]);\n\n  return Confetti;\n}(_react.Component);\n\nexports.default = Confetti;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.confetti = confetti;\nvar defaultColors = [\"#a864fd\", \"#29cdff\", \"#78ff44\", \"#ff718d\", \"#fdff6a\"];\n\nfunction createElements(root, elementCount, colors, width, height) {\n  return Array.from({ length: elementCount }).map(function (_, index) {\n    var element = document.createElement(\"div\");\n    var color = colors[index % colors.length];\n    element.style[\"background-color\"] = color; // eslint-disable-line space-infix-ops\n    element.style.width = width;\n    element.style.height = height;\n    element.style.position = \"absolute\";\n    element.style.willChange = \"transform, opacity\";\n    element.style.visibility = \"hidden\";\n    root.appendChild(element);\n    return element;\n  });\n}\n\nfunction randomPhysics(angle, spread, startVelocity, random) {\n  var radAngle = angle * (Math.PI / 180);\n  var radSpread = spread * (Math.PI / 180);\n  return {\n    x: 0,\n    y: 0,\n    z: 0,\n    wobble: random() * 10,\n    wobbleSpeed: 0.1 + random() * 0.1,\n    velocity: startVelocity * 0.5 + random() * startVelocity,\n    angle2D: -radAngle + (0.5 * radSpread - random() * radSpread),\n    angle3D: -(Math.PI / 4) + random() * (Math.PI / 2),\n    tiltAngle: random() * Math.PI,\n    tiltAngleSpeed: 0.1 + random() * 0.3\n  };\n}\n\nfunction updateFetti(fetti, progress, dragFriction, decay) {\n  /* eslint-disable no-param-reassign */\n  fetti.physics.x += Math.cos(fetti.physics.angle2D) * fetti.physics.velocity;\n  fetti.physics.y += Math.sin(fetti.physics.angle2D) * fetti.physics.velocity;\n  fetti.physics.z += Math.sin(fetti.physics.angle3D) * fetti.physics.velocity;\n  fetti.physics.wobble += fetti.physics.wobbleSpeed;\n  // Backward compatibility\n  if (decay) {\n    fetti.physics.velocity *= decay;\n  } else {\n    fetti.physics.velocity -= fetti.physics.velocity * dragFriction;\n  }\n  fetti.physics.y += 3;\n  fetti.physics.tiltAngle += fetti.physics.tiltAngleSpeed;\n\n  var _fetti$physics = fetti.physics,\n      x = _fetti$physics.x,\n      y = _fetti$physics.y,\n      z = _fetti$physics.z,\n      tiltAngle = _fetti$physics.tiltAngle,\n      wobble = _fetti$physics.wobble;\n\n  var wobbleX = x + 10 * Math.cos(wobble);\n  var wobbleY = y + 10 * Math.sin(wobble);\n  var transform = \"translate3d(\" + wobbleX + \"px, \" + wobbleY + \"px, \" + z + \"px) rotate3d(1, 1, 1, \" + tiltAngle + \"rad)\";\n\n  fetti.element.style.visibility = \"visible\";\n  fetti.element.style.transform = transform;\n  fetti.element.style.opacity = 1 - progress;\n\n  /* eslint-enable */\n}\n\nfunction animate(root, fettis, dragFriction, decay, duration, stagger) {\n  var startTime = void 0;\n\n  return new Promise(function (resolve) {\n    function update(time) {\n      if (!startTime) startTime = time;\n      var elapsed = time - startTime;\n      var progress = startTime === time ? 0 : (time - startTime) / duration;\n      fettis.slice(0, Math.ceil(elapsed / stagger)).forEach(function (fetti) {\n        updateFetti(fetti, progress, dragFriction, decay);\n      });\n\n      if (time - startTime < duration) {\n        requestAnimationFrame(update);\n      } else {\n        fettis.forEach(function (fetti) {\n          if (fetti.element.parentNode === root) {\n            return root.removeChild(fetti.element);\n          }\n        });\n        resolve();\n      }\n    }\n\n    requestAnimationFrame(update);\n  });\n}\n\nvar defaults = {\n  angle: 90,\n  spread: 45,\n  startVelocity: 45,\n  elementCount: 50,\n  width: \"10px\",\n  height: \"10px\",\n  perspective: \"\",\n  colors: defaultColors,\n  duration: 3000,\n  stagger: 0,\n  dragFriction: 0.1,\n  random: Math.random\n};\n\nfunction backwardPatch(config) {\n  if (!config.stagger && config.delay) {\n    config.stagger = config.delay;\n  }\n  return config;\n}\n\nfunction confetti(root) {\n  var config = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  var _Object$assign = Object.assign({}, defaults, backwardPatch(config)),\n      elementCount = _Object$assign.elementCount,\n      colors = _Object$assign.colors,\n      width = _Object$assign.width,\n      height = _Object$assign.height,\n      perspective = _Object$assign.perspective,\n      angle = _Object$assign.angle,\n      spread = _Object$assign.spread,\n      startVelocity = _Object$assign.startVelocity,\n      decay = _Object$assign.decay,\n      dragFriction = _Object$assign.dragFriction,\n      duration = _Object$assign.duration,\n      stagger = _Object$assign.stagger,\n      random = _Object$assign.random;\n\n  root.style.perspective = perspective;\n  var elements = createElements(root, elementCount, colors, width, height);\n  var fettis = elements.map(function (element) {\n    return {\n      element: element,\n      physics: randomPhysics(angle, spread, startVelocity, random)\n    };\n  });\n\n  return animate(root, fettis, dragFriction, decay, duration, stagger);\n}","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","export default function _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}","import _typeof from \"../../helpers/esm/typeof\";\nimport assertThisInitialized from \"./assertThisInitialized\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","import getPrototypeOf from \"./getPrototypeOf\";\nimport isNativeReflectConstruct from \"./isNativeReflectConstruct\";\nimport possibleConstructorReturn from \"./possibleConstructorReturn\";\nexport default function _createSuper(Derived) {\n  return function () {\n    var Super = getPrototypeOf(Derived),\n        result;\n\n    if (isNativeReflectConstruct()) {\n      var NewTarget = getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return possibleConstructorReturn(this, result);\n  };\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}"],"sourceRoot":""}