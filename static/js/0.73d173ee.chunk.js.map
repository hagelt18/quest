{"version":3,"sources":["../node_modules/audio-loader/lib/index.js","../node_modules/audio-loader/lib/base64.js","../node_modules/audio-loader/lib/fetch.js","../node_modules/sample-player/lib/index.js","../node_modules/sample-player/lib/player.js","../node_modules/adsr/index.js","../node_modules/sample-player/lib/events.js","../node_modules/sample-player/lib/notes.js","../node_modules/sample-player/node_modules/note-parser/index.js","../node_modules/sample-player/lib/scheduler.js","../node_modules/sample-player/lib/midi.js","../node_modules/midimessage/dist/index.min.js","../node_modules/soundfont-player/lib/legacy.js","../node_modules/note-parser/index.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","../node_modules/regenerator-runtime/runtime.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/typeof.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js","../node_modules/soundfont-player/lib/index.js"],"names":["base64","require","fetch","fromRegex","r","o","test","prefix","pre","name","load","ac","source","options","defVal","loader","ArrayBuffer","loadArrayBuffer","isAudioFileName","loadAudioFile","then","isPromise","loadPromise","isArray","loadArrayData","isObject","loadObjectData","isJsonFileName","loadJsonFile","isBase64Audio","loadBase64Audio","isJsFileName","loadMidiJSFile","Promise","resolve","reject","array","done","decodeAudioData","buffer","slice","url","from","promise","value","Array","all","map","data","obj","dest","promises","Object","keys","key","only","indexOf","audio","JSON","parse","i","decode","midiJsToJson","begin","Error","end","lastIndexOf","module","exports","window","loadAudio","sBase64","nBlocksSize","nMod3","nMod4","nChr","sB64Enc","replace","nInLen","length","nOutLen","Math","ceil","taBytes","Uint8Array","nUint24","nOutIdx","nInIdx","charCodeAt","type","req","XMLHttpRequest","responseType","open","onload","status","response","statusText","onerror","send","player","events","notes","scheduler","midi","SamplePlayer","ADSR","EMPTY","DEFAULTS","gain","attack","decay","sustain","release","loop","cents","loopStart","loopEnd","isNum","x","PARAMS","connected","nextId","tracked","out","createGain","opts","assign","context","AudioBuffer","buffers","start","when","max","currentTime","emit","node","createNode","id","onended","now","disconnect","env","track","duration","stop","console","warn","play","ids","connect","event","onevent","fn","adsr","forEach","envelope","createBufferSource","playbackRate","pow","time","stopAt","audioContext","voltage","_voltage","createBuffer","sampleRate","getChannelData","set","flat","getVoltage","scale","startValue","endValue","_startAmount","_endAmount","_multiplier","defineProperties","props","writable","getReleaseDuration","this","at","target","startAmount","endAmount","_decayFrom","_startedAt","cancelScheduledValues","setValueAtTime","linearRampToValueAtTime","setTargetAtTime","getTimeConstant","isTarget","endTime","expFalloff","valueAtTime","fromTime","toTime","getValue","get","Float32Array","log","chain","fn1","fn2","a","b","c","d","on","cb","arguments","prop","old","note","toMidi","n","isMidi","toKey","mapper","reduce","mapped","mapBuffers","dec","floor","REGEX","SEMITONES","str","isTonic","tuning","m","exec","p","letter","toUpperCase","acc","pc","step","alt","chroma","oct","freq","midiToFreq","tonicOf","parser","regex","src","isArr","OPTS","schedule","t","isObj","midimessage","listenToMidi","input","started","vel","onmidimessage","msg","mm","messageType","velocity","channel","e","s","h","code","call","1","defineProperty","_event","_data","receivedTime","_messageCode","pressure","controllerNumber","controllerValue","channelModeMessage","program","pitchBend","Soundfont","ctx","nameToUrl","instruments","oscillatorPlayer","defaultOptions","destination","vcoType","vco","createOscillator","frequency","vca","prototype","onready","callback","instrument","inst","push","loadBuffers","noteToMidi","fillStr","num","join","pos","build","charAt","octStr","isDef","_toConsumableArray","arr","arrayLikeToArray","iter","Symbol","iterator","unsupportedIterableToArray","TypeError","asyncGeneratorStep","gen","_next","_throw","arg","info","error","_asyncToGenerator","self","args","apply","err","undefined","runtime","Op","hasOwn","hasOwnProperty","$Symbol","iteratorSymbol","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","wrap","innerFn","outerFn","tryLocsList","protoGenerator","Generator","generator","create","Context","_invoke","state","method","doneResult","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","abrupt","record","tryCatch","makeInvokeMethod","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","AsyncIterator","PromiseImpl","previousPromise","callInvokeWithMethodAndArg","invoke","result","__await","unwrapped","resultName","next","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","constructor","displayName","isGeneratorFunction","genFun","ctor","mark","setPrototypeOf","__proto__","awrap","async","toString","object","reverse","pop","skipTempReset","prev","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","regeneratorRuntime","accidentalStrictMode","Function","_classCallCheck","instance","Constructor","_defineProperties","descriptor","enumerable","configurable","_createClass","protoProps","staticProps","_getPrototypeOf","_isNativeReflectConstruct","Reflect","construct","sham","Proxy","Date","_typeof","_possibleConstructorReturn","ReferenceError","_createSuper","Derived","Super","NewTarget","_setPrototypeOf","_inherits","subClass","superClass","_createForOfIteratorHelper","F","_e","f","it","normalCompletion","didErr","_e2","isSoundfontURL","sf","format","isUrl","toUrl","soundfont"],"mappings":"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","file":"static/js/0.73d173ee.chunk.js","sourcesContent":["'use strict'\n\nvar base64 = require('./base64')\nvar fetch = require('./fetch')\n\n// Given a regex, return a function that test if against a string\nfunction fromRegex (r) {\n  return function (o) { return typeof o === 'string' && r.test(o) }\n}\n// Try to apply a prefix to a name\nfunction prefix (pre, name) {\n  return typeof pre === 'string' ? pre + name\n    : typeof pre === 'function' ? pre(name)\n    : name\n}\n\n/**\n * Load one or more audio files\n *\n *\n * Possible option keys:\n *\n * - __from__ {Function|String}: a function or string to convert from file names to urls.\n * If is a string it will be prefixed to the name:\n * `load(ac, 'snare.mp3', { from: 'http://audio.net/samples/' })`\n * If it's a function it receives the file name and should return the url as string.\n * - __only__ {Array} - when loading objects, if provided, only the given keys\n * will be included in the decoded object:\n * `load(ac, 'piano.json', { only: ['C2', 'D2'] })`\n *\n * @param {AudioContext} ac - the audio context\n * @param {Object} source - the object to be loaded\n * @param {Object} options - (Optional) the load options for that object\n * @param {Object} defaultValue - (Optional) the default value to return as\n * in a promise if not valid loader found\n */\nfunction load (ac, source, options, defVal) {\n  var loader =\n    // Basic audio loading\n      isArrayBuffer(source) ? loadArrayBuffer\n    : isAudioFileName(source) ? loadAudioFile\n    : isPromise(source) ? loadPromise\n    // Compound objects\n    : isArray(source) ? loadArrayData\n    : isObject(source) ? loadObjectData\n    : isJsonFileName(source) ? loadJsonFile\n    // Base64 encoded audio\n    : isBase64Audio(source) ? loadBase64Audio\n    : isJsFileName(source) ? loadMidiJSFile\n    : null\n\n  var opts = options || {}\n  return loader ? loader(ac, source, opts)\n    : defVal ? Promise.resolve(defVal)\n    : Promise.reject('Source not valid (' + source + ')')\n}\nload.fetch = fetch\n\n// BASIC AUDIO LOADING\n// ===================\n\n// Load (decode) an array buffer\nfunction isArrayBuffer (o) { return o instanceof ArrayBuffer }\nfunction loadArrayBuffer (ac, array, options) {\n  return new Promise(function (done, reject) {\n    ac.decodeAudioData(array,\n      function (buffer) { done(buffer) },\n      function () { reject(\"Can't decode audio data (\" + array.slice(0, 30) + '...)') }\n    )\n  })\n}\n\n// Load an audio filename\nvar isAudioFileName = fromRegex(/\\.(mp3|wav|ogg)(\\?.*)?$/i)\nfunction loadAudioFile (ac, name, options) {\n  var url = prefix(options.from, name)\n  return load(ac, load.fetch(url, 'arraybuffer'), options)\n}\n\n// Load the result of a promise\nfunction isPromise (o) { return o && typeof o.then === 'function' }\nfunction loadPromise (ac, promise, options) {\n  return promise.then(function (value) {\n    return load(ac, value, options)\n  })\n}\n\n// COMPOUND OBJECTS\n// ================\n\n// Try to load all the items of an array\nvar isArray = Array.isArray\nfunction loadArrayData (ac, array, options) {\n  return Promise.all(array.map(function (data) {\n    return load(ac, data, options, data)\n  }))\n}\n\n// Try to load all the values of a key/value object\nfunction isObject (o) { return o && typeof o === 'object' }\nfunction loadObjectData (ac, obj, options) {\n  var dest = {}\n  var promises = Object.keys(obj).map(function (key) {\n    if (options.only && options.only.indexOf(key) === -1) return null\n    var value = obj[key]\n    return load(ac, value, options, value).then(function (audio) {\n      dest[key] = audio\n    })\n  })\n  return Promise.all(promises).then(function () { return dest })\n}\n\n// Load the content of a JSON file\nvar isJsonFileName = fromRegex(/\\.json(\\?.*)?$/i)\nfunction loadJsonFile (ac, name, options) {\n  var url = prefix(options.from, name)\n  return load(ac, load.fetch(url, 'text').then(JSON.parse), options)\n}\n\n// BASE64 ENCODED FORMATS\n// ======================\n\n// Load strings with Base64 encoded audio\nvar isBase64Audio = fromRegex(/^data:audio/)\nfunction loadBase64Audio (ac, source, options) {\n  var i = source.indexOf(',')\n  return load(ac, base64.decode(source.slice(i + 1)).buffer, options)\n}\n\n// Load .js files with MidiJS soundfont prerendered audio\nvar isJsFileName = fromRegex(/\\.js(\\?.*)?$/i)\nfunction loadMidiJSFile (ac, name, options) {\n  var url = prefix(options.from, name)\n  return load(ac, load.fetch(url, 'text').then(midiJsToJson), options)\n}\n\n// convert a MIDI.js javascript soundfont file to json\nfunction midiJsToJson (data) {\n  var begin = data.indexOf('MIDI.Soundfont.')\n  if (begin < 0) throw Error('Invalid MIDI.js Soundfont format')\n  begin = data.indexOf('=', begin) + 2\n  var end = data.lastIndexOf(',')\n  return JSON.parse(data.slice(begin, end) + '}')\n}\n\nif (typeof module === 'object' && module.exports) module.exports = load\nif (typeof window !== 'undefined') window.loadAudio = load\n","'use strict'\n\n// DECODE UTILITIES\nfunction b64ToUint6 (nChr) {\n  return nChr > 64 && nChr < 91 ? nChr - 65\n    : nChr > 96 && nChr < 123 ? nChr - 71\n    : nChr > 47 && nChr < 58 ? nChr + 4\n    : nChr === 43 ? 62\n    : nChr === 47 ? 63\n    : 0\n}\n\n// Decode Base64 to Uint8Array\n// ---------------------------\nfunction decode (sBase64, nBlocksSize) {\n  var sB64Enc = sBase64.replace(/[^A-Za-z0-9\\+\\/]/g, '')\n  var nInLen = sB64Enc.length\n  var nOutLen = nBlocksSize\n    ? Math.ceil((nInLen * 3 + 1 >> 2) / nBlocksSize) * nBlocksSize\n    : nInLen * 3 + 1 >> 2\n  var taBytes = new Uint8Array(nOutLen)\n\n  for (var nMod3, nMod4, nUint24 = 0, nOutIdx = 0, nInIdx = 0; nInIdx < nInLen; nInIdx++) {\n    nMod4 = nInIdx & 3\n    nUint24 |= b64ToUint6(sB64Enc.charCodeAt(nInIdx)) << 18 - 6 * nMod4\n    if (nMod4 === 3 || nInLen - nInIdx === 1) {\n      for (nMod3 = 0; nMod3 < 3 && nOutIdx < nOutLen; nMod3++, nOutIdx++) {\n        taBytes[nOutIdx] = nUint24 >>> (16 >>> nMod3 & 24) & 255\n      }\n      nUint24 = 0\n    }\n  }\n  return taBytes\n}\n\nmodule.exports = { decode: decode }\n","/* global XMLHttpRequest */\n'use strict'\n\n/**\n * Given a url and a return type, returns a promise to the content of the url\n * Basically it wraps a XMLHttpRequest into a Promise\n *\n * @param {String} url\n * @param {String} type - can be 'text' or 'arraybuffer'\n * @return {Promise}\n */\nmodule.exports = function (url, type) {\n  return new Promise(function (done, reject) {\n    var req = new XMLHttpRequest()\n    if (type) req.responseType = type\n\n    req.open('GET', url)\n    req.onload = function () {\n      req.status === 200 ? done(req.response) : reject(Error(req.statusText))\n    }\n    req.onerror = function () { reject(Error('Network Error')) }\n    req.send()\n  })\n}\n","'use strict'\n\nvar player = require('./player')\nvar events = require('./events')\nvar notes = require('./notes')\nvar scheduler = require('./scheduler')\nvar midi = require('./midi')\n\nfunction SamplePlayer (ac, source, options) {\n  return midi(scheduler(notes(events(player(ac, source, options)))))\n}\n\nif (typeof module === 'object' && module.exports) module.exports = SamplePlayer\nif (typeof window !== 'undefined') window.SamplePlayer = SamplePlayer\n","/* global AudioBuffer */\n'use strict'\n\nvar ADSR = require('adsr')\n\nvar EMPTY = {}\nvar DEFAULTS = {\n  gain: 1,\n  attack: 0.01,\n  decay: 0.1,\n  sustain: 0.9,\n  release: 0.3,\n  loop: false,\n  cents: 0,\n  loopStart: 0,\n  loopEnd: 0\n}\n\n/**\n * Create a sample player.\n *\n * @param {AudioContext} ac - the audio context\n * @param {ArrayBuffer|Object<String,ArrayBuffer>} source\n * @param {Onject} options - (Optional) an options object\n * @return {player} the player\n * @example\n * var SamplePlayer = require('sample-player')\n * var ac = new AudioContext()\n * var snare = SamplePlayer(ac, <AudioBuffer>)\n * snare.play()\n */\nfunction SamplePlayer (ac, source, options) {\n  var connected = false\n  var nextId = 0\n  var tracked = {}\n  var out = ac.createGain()\n  out.gain.value = 1\n\n  var opts = Object.assign({}, DEFAULTS, options)\n\n  /**\n   * @namespace\n   */\n  var player = { context: ac, out: out, opts: opts }\n  if (source instanceof AudioBuffer) player.buffer = source\n  else player.buffers = source\n\n  /**\n   * Start a sample buffer.\n   *\n   * The returned object has a function `stop(when)` to stop the sound.\n   *\n   * @param {String} name - the name of the buffer. If the source of the\n   * SamplePlayer is one sample buffer, this parameter is not required\n   * @param {Float} when - (Optional) when to start (current time if by default)\n   * @param {Object} options - additional sample playing options\n   * @return {AudioNode} an audio node with a `stop` function\n   * @example\n   * var sample = player(ac, <AudioBuffer>).connect(ac.destination)\n   * sample.start()\n   * sample.start(5, { gain: 0.7 }) // name not required since is only one AudioBuffer\n   * @example\n   * var drums = player(ac, { snare: <AudioBuffer>, kick: <AudioBuffer>, ... }).connect(ac.destination)\n   * drums.start('snare')\n   * drums.start('snare', 0, { gain: 0.3 })\n   */\n  player.start = function (name, when, options) {\n    // if only one buffer, reorder arguments\n    if (player.buffer && name !== null) return player.start(null, name, when)\n\n    var buffer = name ? player.buffers[name] : player.buffer\n    if (!buffer) {\n      console.warn('Buffer ' + name + ' not found.')\n      return\n    } else if (!connected) {\n      console.warn('SamplePlayer not connected to any node.')\n      return\n    }\n\n    var opts = options || EMPTY\n    when = Math.max(ac.currentTime, when || 0)\n    player.emit('start', when, name, opts)\n    var node = createNode(name, buffer, opts)\n    node.id = track(name, node)\n    node.env.start(when)\n    node.source.start(when)\n    player.emit('started', when, node.id, node)\n    if (opts.duration) node.stop(when + opts.duration)\n    return node\n  }\n\n  // NOTE: start will be override so we can't copy the function reference\n  // this is obviously not a good design, so this code will be gone soon.\n  /**\n   * An alias for `player.start`\n   * @see player.start\n   * @since 0.3.0\n   */\n  player.play = function (name, when, options) {\n    return player.start(name, when, options)\n  }\n\n  /**\n   * Stop some or all samples\n   *\n   * @param {Float} when - (Optional) an absolute time in seconds (or currentTime\n   * if not specified)\n   * @param {Array} nodes - (Optional) an array of nodes or nodes ids to stop\n   * @return {Array} an array of ids of the stoped samples\n   *\n   * @example\n   * var longSound = player(ac, <AudioBuffer>).connect(ac.destination)\n   * longSound.start(ac.currentTime)\n   * longSound.start(ac.currentTime + 1)\n   * longSound.start(ac.currentTime + 2)\n   * longSound.stop(ac.currentTime + 3) // stop the three sounds\n   */\n  player.stop = function (when, ids) {\n    var node\n    ids = ids || Object.keys(tracked)\n    return ids.map(function (id) {\n      node = tracked[id]\n      if (!node) return null\n      node.stop(when)\n      return node.id\n    })\n  }\n  /**\n   * Connect the player to a destination node\n   *\n   * @param {AudioNode} destination - the destination node\n   * @return {AudioPlayer} the player\n   * @chainable\n   * @example\n   * var sample = player(ac, <AudioBuffer>).connect(ac.destination)\n   */\n  player.connect = function (dest) {\n    connected = true\n    out.connect(dest)\n    return player\n  }\n\n  player.emit = function (event, when, obj, opts) {\n    if (player.onevent) player.onevent(event, when, obj, opts)\n    var fn = player['on' + event]\n    if (fn) fn(when, obj, opts)\n  }\n\n  return player\n\n  // =============== PRIVATE FUNCTIONS ============== //\n\n  function track (name, node) {\n    node.id = nextId++\n    tracked[node.id] = node\n    node.source.onended = function () {\n      var now = ac.currentTime\n      node.source.disconnect()\n      node.env.disconnect()\n      node.disconnect()\n      player.emit('ended', now, node.id, node)\n    }\n    return node.id\n  }\n\n  function createNode (name, buffer, options) {\n    var node = ac.createGain()\n    node.gain.value = 0 // the envelope will control the gain\n    node.connect(out)\n\n    node.env = envelope(ac, options, opts)\n    node.env.connect(node.gain)\n\n    node.source = ac.createBufferSource()\n    node.source.buffer = buffer\n    node.source.connect(node)\n    node.source.loop = options.loop || opts.loop\n    node.source.playbackRate.value = centsToRate(options.cents || opts.cents)\n    node.source.loopStart = options.loopStart || opts.loopStart\n    node.source.loopEnd = options.loopEnd || opts.loopEnd\n    node.stop = function (when) {\n      var time = when || ac.currentTime\n      player.emit('stop', time, name)\n      var stopAt = node.env.stop(time)\n      node.source.stop(stopAt)\n    }\n    return node\n  }\n}\n\nfunction isNum (x) { return typeof x === 'number' }\nvar PARAMS = ['attack', 'decay', 'sustain', 'release']\nfunction envelope (ac, options, opts) {\n  var env = ADSR(ac)\n  var adsr = options.adsr || opts.adsr\n  PARAMS.forEach(function (name, i) {\n    if (adsr) env[name] = adsr[i]\n    else env[name] = options[name] || opts[name]\n  })\n  env.value.value = isNum(options.gain) ? options.gain\n    : isNum(opts.gain) ? opts.gain : 1\n  return env\n}\n\n/*\n * Get playback rate for a given pitch change (in cents)\n * Basic [math](http://www.birdsoft.demon.co.uk/music/samplert.htm):\n * f2 = f1 * 2^( C / 1200 )\n */\nfunction centsToRate (cents) { return cents ? Math.pow(2, cents / 1200) : 1 }\n\nmodule.exports = SamplePlayer\n","module.exports = ADSR\n\nfunction ADSR(audioContext){\n  var node = audioContext.createGain()\n\n  var voltage = node._voltage = getVoltage(audioContext)\n  var value = scale(voltage)\n  var startValue = scale(voltage)\n  var endValue = scale(voltage)\n\n  node._startAmount = scale(startValue)\n  node._endAmount = scale(endValue)\n\n  node._multiplier = scale(value)\n  node._multiplier.connect(node)\n  node._startAmount.connect(node)\n  node._endAmount.connect(node)\n\n  node.value = value.gain\n  node.startValue = startValue.gain\n  node.endValue = endValue.gain\n\n  node.startValue.value = 0\n  node.endValue.value = 0\n\n  Object.defineProperties(node, props)\n  return node\n}\n\nvar props = {\n\n  attack: { value: 0, writable: true },\n  decay: { value: 0, writable: true },\n  sustain: { value: 1, writable: true },\n  release: {value: 0, writable: true },\n\n  getReleaseDuration: {\n    value: function(){\n      return this.release\n    }\n  },\n\n  start: {\n    value: function(at){\n      var target = this._multiplier.gain\n      var startAmount = this._startAmount.gain\n      var endAmount = this._endAmount.gain\n\n      this._voltage.start(at)\n      this._decayFrom = this._decayFrom = at+this.attack\n      this._startedAt = at\n\n      var sustain = this.sustain\n\n      target.cancelScheduledValues(at)\n      startAmount.cancelScheduledValues(at)\n      endAmount.cancelScheduledValues(at)\n\n      endAmount.setValueAtTime(0, at)\n\n      if (this.attack){\n        target.setValueAtTime(0, at)\n        target.linearRampToValueAtTime(1, at + this.attack)\n\n        startAmount.setValueAtTime(1, at)\n        startAmount.linearRampToValueAtTime(0, at + this.attack)\n      } else {\n        target.setValueAtTime(1, at)\n        startAmount.setValueAtTime(0, at)\n      }\n\n      if (this.decay){\n        target.setTargetAtTime(sustain, this._decayFrom, getTimeConstant(this.decay))\n      }\n    }\n  },\n\n  stop: {\n    value: function(at, isTarget){\n      if (isTarget){\n        at = at - this.release\n      }\n\n      var endTime = at + this.release\n      if (this.release){\n\n        var target = this._multiplier.gain\n        var startAmount = this._startAmount.gain\n        var endAmount = this._endAmount.gain\n\n        target.cancelScheduledValues(at)\n        startAmount.cancelScheduledValues(at)\n        endAmount.cancelScheduledValues(at)\n\n        var expFalloff = getTimeConstant(this.release)\n\n        // truncate attack (required as linearRamp is removed by cancelScheduledValues)\n        if (this.attack && at < this._decayFrom){\n          var valueAtTime = getValue(0, 1, this._startedAt, this._decayFrom, at)\n          target.linearRampToValueAtTime(valueAtTime, at)\n          startAmount.linearRampToValueAtTime(1-valueAtTime, at)\n          startAmount.setTargetAtTime(0, at, expFalloff)\n        }\n\n        endAmount.setTargetAtTime(1, at, expFalloff)\n        target.setTargetAtTime(0, at, expFalloff)\n      }\n\n      this._voltage.stop(endTime)\n      return endTime\n    }\n  },\n\n  onended: {\n    get: function(){\n      return this._voltage.onended\n    },\n    set: function(value){\n      this._voltage.onended = value\n    }\n  }\n\n}\n\nvar flat = new Float32Array([1,1])\nfunction getVoltage(context){\n  var voltage = context.createBufferSource()\n  var buffer = context.createBuffer(1, 2, context.sampleRate)\n  buffer.getChannelData(0).set(flat)\n  voltage.buffer = buffer\n  voltage.loop = true\n  return voltage\n}\n\nfunction scale(node){\n  var gain = node.context.createGain()\n  node.connect(gain)\n  return gain\n}\n\nfunction getTimeConstant(time){\n  return Math.log(time+1)/Math.log(100)\n}\n\nfunction getValue(start, end, fromTime, toTime, at){\n  var difference = end - start\n  var time = toTime - fromTime\n  var truncateTime = at - fromTime\n  var phase = truncateTime / time\n  var value = start + phase * difference\n\n  if (value <= start) {\n      value = start\n  }\n  if (value >= end) {\n      value = end\n  }\n\n  return value\n}\n","\nmodule.exports = function (player) {\n  /**\n   * Adds a listener of an event\n   * @chainable\n   * @param {String} event - the event name\n   * @param {Function} callback - the event handler\n   * @return {SamplePlayer} the player\n   * @example\n   * player.on('start', function(time, note) {\n   *   console.log(time, note)\n   * })\n   */\n  player.on = function (event, cb) {\n    if (arguments.length === 1 && typeof event === 'function') return player.on('event', event)\n    var prop = 'on' + event\n    var old = player[prop]\n    player[prop] = old ? chain(old, cb) : cb\n    return player\n  }\n  return player\n}\n\nfunction chain (fn1, fn2) {\n  return function (a, b, c, d) { fn1(a, b, c, d); fn2(a, b, c, d) }\n}\n","'use strict'\n\nvar note = require('note-parser')\nvar isMidi = function (n) { return n !== null && n !== [] && n >= 0 && n < 129 }\nvar toMidi = function (n) { return isMidi(n) ? +n : note.midi(n) }\n\n// Adds note name to midi conversion\nmodule.exports = function (player) {\n  if (player.buffers) {\n    var map = player.opts.map\n    var toKey = typeof map === 'function' ? map : toMidi\n    var mapper = function (name) {\n      return name ? toKey(name) || name : null\n    }\n\n    player.buffers = mapBuffers(player.buffers, mapper)\n    var start = player.start\n    player.start = function (name, when, options) {\n      var key = mapper(name)\n      var dec = key % 1\n      if (dec) {\n        key = Math.floor(key)\n        options = Object.assign(options || {}, { cents: Math.floor(dec * 100) })\n      }\n      return start(key, when, options)\n    }\n  }\n  return player\n}\n\nfunction mapBuffers (buffers, toKey) {\n  return Object.keys(buffers).reduce(function (mapped, name) {\n    mapped[toKey(name)] = buffers[name]\n    return mapped\n  }, {})\n}\n","'use strict'\n\nvar REGEX = /^([a-gA-G])(#{1,}|b{1,}|x{1,}|)(-?\\d*)\\s*(.*)\\s*$/\n/**\n * A regex for matching note strings in scientific notation.\n *\n * @name regex\n * @function\n * @return {RegExp} the regexp used to parse the note name\n *\n * The note string should have the form `letter[accidentals][octave][element]`\n * where:\n *\n * - letter: (Required) is a letter from A to G either upper or lower case\n * - accidentals: (Optional) can be one or more `b` (flats), `#` (sharps) or `x` (double sharps).\n * They can NOT be mixed.\n * - octave: (Optional) a positive or negative integer\n * - element: (Optional) additionally anything after the duration is considered to\n * be the element name (for example: 'C2 dorian')\n *\n * The executed regex contains (by array index):\n *\n * - 0: the complete string\n * - 1: the note letter\n * - 2: the optional accidentals\n * - 3: the optional octave\n * - 4: the rest of the string (trimmed)\n *\n * @example\n * var parser = require('note-parser')\n * parser.regex.exec('c#4')\n * // => ['c#4', 'c', '#', '4', '']\n * parser.regex.exec('c#4 major')\n * // => ['c#4major', 'c', '#', '4', 'major']\n * parser.regex().exec('CMaj7')\n * // => ['CMaj7', 'C', '', '', 'Maj7']\n */\nfunction regex () { return REGEX }\n\nvar SEMITONES = [0, 2, 4, 5, 7, 9, 11]\n/**\n * Parse a note name in scientific notation an return it's components,\n * and some numeric properties including midi number and frequency.\n *\n * @name parse\n * @function\n * @param {String} note - the note string to be parsed\n * @param {Boolean} isTonic - true if the note is the tonic of something.\n * If true, en extra tonicOf property is returned. It's false by default.\n * @param {Float} tunning - The frequency of A4 note to calculate frequencies.\n * By default it 440.\n * @return {Object} the parsed note name or null if not a valid note\n *\n * The parsed note name object will ALWAYS contains:\n * - letter: the uppercase letter of the note\n * - acc: the accidentals of the note (only sharps or flats)\n * - pc: the pitch class (letter + acc)\n * - step: s a numeric representation of the letter. It's an integer from 0 to 6\n * where 0 = C, 1 = D ... 6 = B\n * - alt: a numeric representation of the accidentals. 0 means no alteration,\n * positive numbers are for sharps and negative for flats\n * - chroma: a numeric representation of the pitch class. It's like midi for\n * pitch classes. 0 = C, 1 = C#, 2 = D ... It can have negative values: -1 = Cb.\n * Can detect pitch class enhramonics.\n *\n * If the note has octave, the parser object will contain:\n * - oct: the octave number (as integer)\n * - midi: the midi number\n * - freq: the frequency (using tuning parameter as base)\n *\n * If the parameter `isTonic` is set to true, the parsed object will contain:\n * - tonicOf: the rest of the string that follows note name (left and right trimmed)\n *\n * @example\n * var parse = require('note-parser').parse\n * parse('Cb4')\n * // => { letter: 'C', acc: 'b', pc: 'Cb', step: 0, alt: -1, chroma: -1,\n *         oct: 4, midi: 59, freq: 246.94165062806206 }\n * // if no octave, no midi, no freq\n * parse('fx')\n * // => { letter: 'F', acc: '##', pc: 'F##', step: 3, alt: 2, chroma: 7 })\n */\nfunction parse (str, isTonic, tuning) {\n  if (typeof str !== 'string') return null\n  var m = REGEX.exec(str)\n  if (!m || !isTonic && m[4]) return null\n\n  var p = { letter: m[1].toUpperCase(), acc: m[2].replace(/x/g, '##') }\n  p.pc = p.letter + p.acc\n  p.step = (p.letter.charCodeAt(0) + 3) % 7\n  p.alt = p.acc[0] === 'b' ? -p.acc.length : p.acc.length\n  p.chroma = SEMITONES[p.step] + p.alt\n  if (m[3]) {\n    p.oct = +m[3]\n    p.midi = p.chroma + 12 * (p.oct + 1)\n    p.freq = midiToFreq(p.midi, tuning)\n  }\n  if (isTonic) p.tonicOf = m[4]\n  return p\n}\n\n/**\n * Given a midi number, return its frequency\n * @param {Integer} midi - midi note number\n * @param {Float} tuning - (Optional) the A4 tuning (440Hz by default)\n * @return {Float} frequency in hertzs\n */\nfunction midiToFreq (midi, tuning) {\n  return Math.pow(2, (midi - 69) / 12) * (tuning || 440)\n}\n\nvar parser = { parse: parse, regex: regex, midiToFreq: midiToFreq }\nvar FNS = ['letter', 'acc', 'pc', 'step', 'alt', 'chroma', 'oct', 'midi', 'freq']\nFNS.forEach(function (name) {\n  parser[name] = function (src) {\n    var p = parse(src)\n    return p && (typeof p[name] !== 'undefined') ? p[name] : null\n  }\n})\n\nmodule.exports = parser\n\n// extra API docs\n/**\n * Get midi of a note\n *\n * @name midi\n * @function\n * @param {String} note - the note name\n * @return {Integer} the midi number of the note or null if not a valid note\n * or the note does NOT contains octave\n * @example\n * var parser = require('note-parser')\n * parser.midi('A4') // => 69\n * parser.midi('A') // => null\n */\n/**\n * Get freq of a note in hertzs (in a well tempered 440Hz A4)\n *\n * @name freq\n * @function\n * @param {String} note - the note name\n * @return {Float} the freq of the number if hertzs or null if not valid note\n * or the note does NOT contains octave\n * @example\n * var parser = require('note-parser')\n * parser.freq('A4') // => 440\n * parser.freq('A') // => null\n */\n","'use strict'\n\nvar isArr = Array.isArray\nvar isObj = function (o) { return o && typeof o === 'object' }\nvar OPTS = {}\n\nmodule.exports = function (player) {\n  /**\n   * Schedule a list of events to be played at specific time.\n   *\n   * It supports three formats of events for the events list:\n   *\n   * - An array with [time, note]\n   * - An array with [time, object]\n   * - An object with { time: ?, [name|note|midi|key]: ? }\n   *\n   * @param {Float} time - an absolute time to start (or AudioContext's\n   * currentTime if provided number is 0)\n   * @param {Array} events - the events list.\n   * @return {Array} an array of ids\n   *\n   * @example\n   * // Event format: [time, note]\n   * var piano = player(ac, ...).connect(ac.destination)\n   * piano.schedule(0, [ [0, 'C2'], [0.5, 'C3'], [1, 'C4'] ])\n   *\n   * @example\n   * // Event format: an object { time: ?, name: ? }\n   * var drums = player(ac, ...).connect(ac.destination)\n   * drums.schedule(0, [\n   *   { name: 'kick', time: 0 },\n   *   { name: 'snare', time: 0.5 },\n   *   { name: 'kick', time: 1 },\n   *   { name: 'snare', time: 1.5 }\n   * ])\n   */\n  player.schedule = function (time, events) {\n    var now = player.context.currentTime\n    var when = time < now ? now : time\n    player.emit('schedule', when, events)\n    var t, o, note, opts\n    return events.map(function (event) {\n      if (!event) return null\n      else if (isArr(event)) {\n        t = event[0]; o = event[1]\n      } else {\n        t = event.time; o = event\n      }\n\n      if (isObj(o)) {\n        note = o.name || o.key || o.note || o.midi || null\n        opts = o\n      } else {\n        note = o\n        opts = OPTS\n      }\n\n      return player.start(note, when + (t || 0), opts)\n    })\n  }\n  return player\n}\n","var midimessage = require('midimessage')\n\nmodule.exports = function (player) {\n  /**\n  * Connect a player to a midi input\n  *\n  * The options accepts:\n  *\n  * - channel: the channel to listen to. Listen to all channels by default.\n  *\n  * @param {MIDIInput} input\n  * @param {Object} options - (Optional)\n  * @return {SamplePlayer} the player\n  * @example\n  * var piano = player(...)\n  * window.navigator.requestMIDIAccess().then(function (midiAccess) {\n  *   midiAccess.inputs.forEach(function (midiInput) {\n  *     piano.listenToMidi(midiInput)\n  *   })\n  * })\n  */\n  player.listenToMidi = function (input, options) {\n    var started = {}\n    var opts = options || {}\n    var gain = opts.gain || function (vel) { return vel / 127 }\n\n    input.onmidimessage = function (msg) {\n      var mm = msg.messageType ? msg : midimessage(msg)\n      if (mm.messageType === 'noteon' && mm.velocity === 0) {\n        mm.messageType = 'noteoff'\n      }\n      if (opts.channel && mm.channel !== opts.channel) return\n\n      switch (mm.messageType) {\n        case 'noteon':\n          started[mm.key] = player.play(mm.key, 0, { gain: gain(mm.velocity) })\n          break\n        case 'noteoff':\n          if (started[mm.key]) {\n            started[mm.key].stop()\n            delete started[mm.key]\n          }\n          break\n      }\n    }\n    return player\n  }\n  return player\n}\n","(function(e){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=e()}else if(typeof define===\"function\"&&define.amd){define([],e)}else{var t;if(typeof window!==\"undefined\"){t=window}else if(typeof global!==\"undefined\"){t=global}else if(typeof self!==\"undefined\"){t=self}else{t=this}t.midimessage=e()}})(function(){var e,t,s;return function o(e,t,s){function a(n,i){if(!t[n]){if(!e[n]){var l=typeof require==\"function\"&&require;if(!i&&l)return l(n,!0);if(r)return r(n,!0);var h=new Error(\"Cannot find module '\"+n+\"'\");throw h.code=\"MODULE_NOT_FOUND\",h}var c=t[n]={exports:{}};e[n][0].call(c.exports,function(t){var s=e[n][1][t];return a(s?s:t)},c,c.exports,o,e,t,s)}return t[n].exports}var r=typeof require==\"function\"&&require;for(var n=0;n<s.length;n++)a(s[n]);return a}({1:[function(e,t,s){\"use strict\";Object.defineProperty(s,\"__esModule\",{value:true});s[\"default\"]=function(e){function t(e){this._event=e;this._data=e.data;this.receivedTime=e.receivedTime;if(this._data&&this._data.length<2){console.warn(\"Illegal MIDI message of length\",this._data.length);return}this._messageCode=e.data[0]&240;this.channel=e.data[0]&15;switch(this._messageCode){case 128:this.messageType=\"noteoff\";this.key=e.data[1]&127;this.velocity=e.data[2]&127;break;case 144:this.messageType=\"noteon\";this.key=e.data[1]&127;this.velocity=e.data[2]&127;break;case 160:this.messageType=\"keypressure\";this.key=e.data[1]&127;this.pressure=e.data[2]&127;break;case 176:this.messageType=\"controlchange\";this.controllerNumber=e.data[1]&127;this.controllerValue=e.data[2]&127;if(this.controllerNumber===120&&this.controllerValue===0){this.channelModeMessage=\"allsoundoff\"}else if(this.controllerNumber===121){this.channelModeMessage=\"resetallcontrollers\"}else if(this.controllerNumber===122){if(this.controllerValue===0){this.channelModeMessage=\"localcontroloff\"}else{this.channelModeMessage=\"localcontrolon\"}}else if(this.controllerNumber===123&&this.controllerValue===0){this.channelModeMessage=\"allnotesoff\"}else if(this.controllerNumber===124&&this.controllerValue===0){this.channelModeMessage=\"omnimodeoff\"}else if(this.controllerNumber===125&&this.controllerValue===0){this.channelModeMessage=\"omnimodeon\"}else if(this.controllerNumber===126){this.channelModeMessage=\"monomodeon\"}else if(this.controllerNumber===127){this.channelModeMessage=\"polymodeon\"}break;case 192:this.messageType=\"programchange\";this.program=e.data[1];break;case 208:this.messageType=\"channelpressure\";this.pressure=e.data[1]&127;break;case 224:this.messageType=\"pitchbendchange\";var t=e.data[2]&127;var s=e.data[1]&127;this.pitchBend=(t<<8)+s;break}}return new t(e)};t.exports=s[\"default\"]},{}]},{},[1])(1)});\n//# sourceMappingURL=dist/index.js.map","'use strict'\n\nvar parser = require('note-parser')\n\n/**\n * Create a Soundfont object\n *\n * @param {AudioContext} context - the [audio context](https://developer.mozilla.org/en/docs/Web/API/AudioContext)\n * @param {Function} nameToUrl - (Optional) a function that maps the sound font name to the url\n * @return {Soundfont} a soundfont object\n */\nfunction Soundfont (ctx, nameToUrl) {\n  console.warn('new Soundfont() is deprected')\n  console.log('Please use Soundfont.instrument() instead of new Soundfont().instrument()')\n  if (!(this instanceof Soundfont)) return new Soundfont(ctx)\n\n  this.nameToUrl = nameToUrl || Soundfont.nameToUrl\n  this.ctx = ctx\n  this.instruments = {}\n  this.promises = []\n}\n\nSoundfont.prototype.onready = function (callback) {\n  console.warn('deprecated API')\n  console.log('Please use Promise.all(Soundfont.instrument(), Soundfont.instrument()).then() instead of new Soundfont().onready()')\n  Promise.all(this.promises).then(callback)\n}\n\nSoundfont.prototype.instrument = function (name, options) {\n  console.warn('new Soundfont().instrument() is deprecated.')\n  console.log('Please use Soundfont.instrument() instead.')\n  var ctx = this.ctx\n  name = name || 'default'\n  if (name in this.instruments) return this.instruments[name]\n  var inst = {name: name, play: oscillatorPlayer(ctx, options)}\n  this.instruments[name] = inst\n  if (name !== 'default') {\n    var promise = Soundfont.instrument(ctx, name, options).then(function (instrument) {\n      inst.play = instrument.play\n      return inst\n    })\n    this.promises.push(promise)\n    inst.onready = function (cb) {\n      console.warn('onready is deprecated. Use Soundfont.instrument().then()')\n      promise.then(cb)\n    }\n  } else {\n    inst.onready = function (cb) {\n      console.warn('onready is deprecated. Use Soundfont.instrument().then()')\n      cb()\n    }\n  }\n  return inst\n}\n\n/*\n * Load the buffers of a given instrument name. It returns a promise that resolves\n * to a hash with midi note numbers as keys, and audio buffers as values.\n *\n * @param {AudioContext} ac - the audio context\n * @param {String} name - the instrument name (it accepts an url if starts with \"http\")\n * @param {Object} options - (Optional) options object\n * @return {Promise} a promise that resolves to a Hash of { midiNoteNum: <AudioBuffer> }\n *\n * The options object accepts the following keys:\n *\n * - nameToUrl {Function}: a function to convert from instrument names to urls.\n * By default it uses Benjamin Gleitzman's package of\n * [pre-rendered sound fonts](https://github.com/gleitz/midi-js-soundfonts)\n * - notes {Array}: the list of note names to be decoded (all by default)\n *\n * @example\n * var Soundfont = require('soundfont-player')\n * Soundfont.loadBuffers(ctx, 'acoustic_grand_piano').then(function(buffers) {\n *  buffers[60] // => An <AudioBuffer> corresponding to note C4\n * })\n */\nfunction loadBuffers (ac, name, options) {\n  console.warn('Soundfont.loadBuffers is deprecate.')\n  console.log('Use Soundfont.instrument(..) and get buffers properties from the result.')\n  return Soundfont.instrument(ac, name, options).then(function (inst) {\n    return inst.buffers\n  })\n}\nSoundfont.loadBuffers = loadBuffers\n\n/**\n * Returns a function that plays an oscillator\n *\n * @param {AudioContext} ac - the audio context\n * @param {Hash} defaultOptions - (Optional) a hash of options:\n * - vcoType: the oscillator type (default: 'sine')\n * - gain: the output gain value (default: 0.4)\n  * - destination: the player destination (default: ac.destination)\n */\nfunction oscillatorPlayer (ctx, defaultOptions) {\n  defaultOptions = defaultOptions || {}\n  return function (note, time, duration, options) {\n    console.warn('The oscillator player is deprecated.')\n    console.log('Starting with version 0.9.0 you will have to wait until the soundfont is loaded to play sounds.')\n    var midi = note > 0 && note < 129 ? +note : parser.midi(note)\n    var freq = midi ? parser.midiToFreq(midi, 440) : null\n    if (!freq) return\n\n    duration = duration || 0.2\n\n    options = options || {}\n    var destination = options.destination || defaultOptions.destination || ctx.destination\n    var vcoType = options.vcoType || defaultOptions.vcoType || 'sine'\n    var gain = options.gain || defaultOptions.gain || 0.4\n\n    var vco = ctx.createOscillator()\n    vco.type = vcoType\n    vco.frequency.value = freq\n\n    /* VCA */\n    var vca = ctx.createGain()\n    vca.gain.value = gain\n\n    /* Connections */\n    vco.connect(vca)\n    vca.connect(destination)\n\n    vco.start(time)\n    if (duration > 0) vco.stop(time + duration)\n    return vco\n  }\n}\n\n/**\n * Given a note name, return the note midi number\n *\n * @name noteToMidi\n * @function\n * @param {String} noteName\n * @return {Integer} the note midi number or null if not a valid note name\n */\nSoundfont.noteToMidi = parser.midi\n\nmodule.exports = Soundfont\n","'use strict'\n\n// util\nfunction fillStr (s, num) { return Array(num + 1).join(s) }\nfunction isNum (x) { return typeof x === 'number' }\nfunction isStr (x) { return typeof x === 'string' }\nfunction isDef (x) { return typeof x !== 'undefined' }\nfunction midiToFreq (midi, tuning) {\n  return Math.pow(2, (midi - 69) / 12) * (tuning || 440)\n}\n\nvar REGEX = /^([a-gA-G])(#{1,}|b{1,}|x{1,}|)(-?\\d*)\\s*(.*)\\s*$/\n/**\n * A regex for matching note strings in scientific notation.\n *\n * @name regex\n * @function\n * @return {RegExp} the regexp used to parse the note name\n *\n * The note string should have the form `letter[accidentals][octave][element]`\n * where:\n *\n * - letter: (Required) is a letter from A to G either upper or lower case\n * - accidentals: (Optional) can be one or more `b` (flats), `#` (sharps) or `x` (double sharps).\n * They can NOT be mixed.\n * - octave: (Optional) a positive or negative integer\n * - element: (Optional) additionally anything after the duration is considered to\n * be the element name (for example: 'C2 dorian')\n *\n * The executed regex contains (by array index):\n *\n * - 0: the complete string\n * - 1: the note letter\n * - 2: the optional accidentals\n * - 3: the optional octave\n * - 4: the rest of the string (trimmed)\n *\n * @example\n * var parser = require('note-parser')\n * parser.regex.exec('c#4')\n * // => ['c#4', 'c', '#', '4', '']\n * parser.regex.exec('c#4 major')\n * // => ['c#4major', 'c', '#', '4', 'major']\n * parser.regex().exec('CMaj7')\n * // => ['CMaj7', 'C', '', '', 'Maj7']\n */\nexport function regex () { return REGEX }\n\nvar SEMITONES = [0, 2, 4, 5, 7, 9, 11]\n/**\n * Parse a note name in scientific notation an return it's components,\n * and some numeric properties including midi number and frequency.\n *\n * @name parse\n * @function\n * @param {String} note - the note string to be parsed\n * @param {Boolean} isTonic - true the strings it's supposed to contain a note number\n * and some category (for example an scale: 'C# major'). It's false by default,\n * but when true, en extra tonicOf property is returned with the category ('major')\n * @param {Float} tunning - The frequency of A4 note to calculate frequencies.\n * By default it 440.\n * @return {Object} the parsed note name or null if not a valid note\n *\n * The parsed note name object will ALWAYS contains:\n * - letter: the uppercase letter of the note\n * - acc: the accidentals of the note (only sharps or flats)\n * - pc: the pitch class (letter + acc)\n * - step: s a numeric representation of the letter. It's an integer from 0 to 6\n * where 0 = C, 1 = D ... 6 = B\n * - alt: a numeric representation of the accidentals. 0 means no alteration,\n * positive numbers are for sharps and negative for flats\n * - chroma: a numeric representation of the pitch class. It's like midi for\n * pitch classes. 0 = C, 1 = C#, 2 = D ... 11 = B. Can be used to find enharmonics\n * since, for example, chroma of 'Cb' and 'B' are both 11\n *\n * If the note has octave, the parser object will contain:\n * - oct: the octave number (as integer)\n * - midi: the midi number\n * - freq: the frequency (using tuning parameter as base)\n *\n * If the parameter `isTonic` is set to true, the parsed object will contain:\n * - tonicOf: the rest of the string that follows note name (left and right trimmed)\n *\n * @example\n * var parse = require('note-parser').parse\n * parse('Cb4')\n * // => { letter: 'C', acc: 'b', pc: 'Cb', step: 0, alt: -1, chroma: -1,\n *         oct: 4, midi: 59, freq: 246.94165062806206 }\n * // if no octave, no midi, no freq\n * parse('fx')\n * // => { letter: 'F', acc: '##', pc: 'F##', step: 3, alt: 2, chroma: 7 })\n */\nexport function parse (str, isTonic, tuning) {\n  if (typeof str !== 'string') return null\n  var m = REGEX.exec(str)\n  if (!m || (!isTonic && m[4])) return null\n\n  var p = { letter: m[1].toUpperCase(), acc: m[2].replace(/x/g, '##') }\n  p.pc = p.letter + p.acc\n  p.step = (p.letter.charCodeAt(0) + 3) % 7\n  p.alt = p.acc[0] === 'b' ? -p.acc.length : p.acc.length\n  var pos = SEMITONES[p.step] + p.alt\n  p.chroma = pos < 0 ? 12 + pos : pos % 12\n  if (m[3]) { // has octave\n    p.oct = +m[3]\n    p.midi = pos + 12 * (p.oct + 1)\n    p.freq = midiToFreq(p.midi, tuning)\n  }\n  if (isTonic) p.tonicOf = m[4]\n  return p\n}\n\nvar LETTERS = 'CDEFGAB'\nfunction accStr (n) { return !isNum(n) ? '' : n < 0 ? fillStr('b', -n) : fillStr('#', n) }\nfunction octStr (n) { return !isNum(n) ? '' : '' + n }\n\n/**\n * Create a string from a parsed object or `step, alteration, octave` parameters\n * @param {Object} obj - the parsed data object\n * @return {String} a note string or null if not valid parameters\n * @since 1.2\n * @example\n * parser.build(parser.parse('cb2')) // => 'Cb2'\n *\n * @example\n * // it accepts (step, alteration, octave) parameters:\n * parser.build(3) // => 'F'\n * parser.build(3, -1) // => 'Fb'\n * parser.build(3, -1, 4) // => 'Fb4'\n */\nexport function build (s, a, o) {\n  if (s === null || typeof s === 'undefined') return null\n  if (s.step) return build(s.step, s.alt, s.oct)\n  if (s < 0 || s > 6) return null\n  return LETTERS.charAt(s) + accStr(a) + octStr(o)\n}\n\n/**\n * Get midi of a note\n *\n * @name midi\n * @function\n * @param {String|Integer} note - the note name or midi number\n * @return {Integer} the midi number of the note or null if not a valid note\n * or the note does NOT contains octave\n * @example\n * var parser = require('note-parser')\n * parser.midi('A4') // => 69\n * parser.midi('A') // => null\n * @example\n * // midi numbers are bypassed (even as strings)\n * parser.midi(60) // => 60\n * parser.midi('60') // => 60\n */\nexport function midi (note) {\n  if ((isNum(note) || isStr(note)) && note >= 0 && note < 128) return +note\n  var p = parse(note)\n  return p && isDef(p.midi) ? p.midi : null\n}\n\n/**\n * Get freq of a note in hertzs (in a well tempered 440Hz A4)\n *\n * @name freq\n * @function\n * @param {String} note - the note name or note midi number\n * @param {String} tuning - (Optional) the A4 frequency (440 by default)\n * @return {Float} the freq of the number if hertzs or null if not valid note\n * @example\n * var parser = require('note-parser')\n * parser.freq('A4') // => 440\n * parser.freq('A') // => null\n * @example\n * // can change tuning (440 by default)\n * parser.freq('A4', 444) // => 444\n * parser.freq('A3', 444) // => 222\n * @example\n * // it accepts midi numbers (as numbers and as strings)\n * parser.freq(69) // => 440\n * parser.freq('69', 442) // => 442\n */\nexport function freq (note, tuning) {\n  var m = midi(note)\n  return m === null ? null : midiToFreq(m, tuning)\n}\n\nexport function letter (src) { return (parse(src) || {}).letter }\nexport function acc (src) { return (parse(src) || {}).acc }\nexport function pc (src) { return (parse(src) || {}).pc }\nexport function step (src) { return (parse(src) || {}).step }\nexport function alt (src) { return (parse(src) || {}).alt }\nexport function chroma (src) { return (parse(src) || {}).chroma }\nexport function oct (src) { return (parse(src) || {}).oct }\n","import arrayWithoutHoles from \"./arrayWithoutHoles\";\nimport iterableToArray from \"./iterableToArray\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nimport nonIterableSpread from \"./nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import arrayLikeToArray from \"./arrayLikeToArray\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","module.exports = require(\"regenerator-runtime\");\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunctionPrototype[toStringTagSymbol] =\n    GeneratorFunction.displayName = \"GeneratorFunction\";\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      prototype[method] = function(arg) {\n        return this._invoke(method, arg);\n      };\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      if (!(toStringTagSymbol in genFun)) {\n        genFun[toStringTagSymbol] = \"GeneratorFunction\";\n      }\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  Gp[toStringTagSymbol] = \"Generator\";\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n}\n","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","export default function _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}","import _typeof from \"../../helpers/esm/typeof\";\nimport assertThisInitialized from \"./assertThisInitialized\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","import getPrototypeOf from \"./getPrototypeOf\";\nimport isNativeReflectConstruct from \"./isNativeReflectConstruct\";\nimport possibleConstructorReturn from \"./possibleConstructorReturn\";\nexport default function _createSuper(Derived) {\n  return function () {\n    var Super = getPrototypeOf(Derived),\n        result;\n\n    if (isNativeReflectConstruct()) {\n      var NewTarget = getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return possibleConstructorReturn(this, result);\n  };\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","import unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nexport default function _createForOfIteratorHelper(o) {\n  if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) {\n    if (Array.isArray(o) || (o = unsupportedIterableToArray(o))) {\n      var i = 0;\n\n      var F = function F() {};\n\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var it,\n      normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function s() {\n      it = o[Symbol.iterator]();\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it[\"return\"] != null) it[\"return\"]();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}","'use strict'\n\nvar load = require('audio-loader')\nvar player = require('sample-player')\n\n/**\n * Load a soundfont instrument. It returns a promise that resolves to a\n * instrument object.\n *\n * The instrument object returned by the promise has the following properties:\n *\n * - name: the instrument name\n * - play: A function to play notes from the buffer with the signature\n * `play(note, time, duration, options)`\n *\n *\n * The valid options are:\n *\n * - `format`: the soundfont format. 'mp3' by default. Can be 'ogg'\n * - `soundfont`: the soundfont name. 'MusyngKite' by default. Can be 'FluidR3_GM'\n * - `nameToUrl` <Function>: a function to convert from instrument names to URL\n * - `destination`: by default Soundfont uses the `audioContext.destination` but you can override it.\n * - `gain`: the gain of the player (1 by default)\n * - `notes`: an array of the notes to decode. It can be an array of strings\n * with note names or an array of numbers with midi note numbers. This is a\n * performance option: since decoding mp3 is a cpu intensive process, you can limit\n * limit the number of notes you want and reduce the time to load the instrument.\n *\n * @param {AudioContext} ac - the audio context\n * @param {String} name - the instrument name. For example: 'acoustic_grand_piano'\n * @param {Object} options - (Optional) the same options as Soundfont.loadBuffers\n * @return {Promise}\n *\n * @example\n * var Soundfont = require('sounfont-player')\n * Soundfont.instrument('marimba').then(function (marimba) {\n *   marimba.play('C4')\n * })\n */\nfunction instrument (ac, name, options) {\n  if (arguments.length === 1) return function (n, o) { return instrument(ac, n, o) }\n  var opts = options || {}\n  var isUrl = opts.isSoundfontURL || isSoundfontURL\n  var toUrl = opts.nameToUrl || nameToUrl\n  var url = isUrl(name) ? name : toUrl(name, opts.soundfont, opts.format)\n\n  return load(ac, url, { only: opts.only || opts.notes }).then(function (buffers) {\n    var p = player(ac, buffers, opts).connect(opts.destination ? opts.destination : ac.destination)\n    p.url = url\n    p.name = name\n    return p\n  })\n}\n\nfunction isSoundfontURL (name) {\n  return /\\.js(\\?.*)?$/i.test(name)\n}\n\n/**\n * Given an instrument name returns a URL to to the Benjamin Gleitzman's\n * package of [pre-rendered sound fonts](https://github.com/gleitz/midi-js-soundfonts)\n *\n * @param {String} name - instrument name\n * @param {String} soundfont - (Optional) the soundfont name. One of 'FluidR3_GM'\n * or 'MusyngKite' ('MusyngKite' by default)\n * @param {String} format - (Optional) Can be 'mp3' or 'ogg' (mp3 by default)\n * @returns {String} the Soundfont file url\n * @example\n * var Soundfont = require('soundfont-player')\n * Soundfont.nameToUrl('marimba', 'mp3')\n */\nfunction nameToUrl (name, sf, format) {\n  format = format === 'ogg' ? format : 'mp3'\n  sf = sf === 'FluidR3_GM' ? sf : 'MusyngKite'\n  return 'https://gleitz.github.io/midi-js-soundfonts/' + sf + '/' + name + '-' + format + '.js'\n}\n\n// In the 1.0.0 release it will be:\n// var Soundfont = {}\nvar Soundfont = require('./legacy')\nSoundfont.instrument = instrument\nSoundfont.nameToUrl = nameToUrl\n\nif (typeof module === 'object' && module.exports) module.exports = Soundfont\nif (typeof window !== 'undefined') window.Soundfont = Soundfont\n"],"sourceRoot":""}